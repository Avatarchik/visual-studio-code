"use strict";var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},_cssPluginGlobal=this,CSSLoaderPlugin;!function(e){var t=_cssPluginGlobal,r=function(){function e(){this._pendingLoads=0}return e.prototype.attachListeners=function(e,t,r,n){var o=function(){t.removeEventListener("load",i),t.removeEventListener("error",s)},i=function(){o(),r()},s=function(e){o(),n(e)};t.addEventListener("load",i),t.addEventListener("error",s)},e.prototype._onLoad=function(e,t){this._pendingLoads--,t()},e.prototype._onLoadError=function(e,t,r){this._pendingLoads--,t(r)},e.prototype._insertLinkNode=function(e){this._pendingLoads++;var t=document.head||document.getElementsByTagName("head")[0],r=t.getElementsByTagName("link")||document.head.getElementsByTagName("script");r.length>0?t.insertBefore(e,r[r.length-1]):t.appendChild(e)},e.prototype.createLinkTag=function(e,t,r,n){var o=this,i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("data-name",e);var s=function(){return o._onLoad(e,r)},a=function(t){return o._onLoadError(e,n,t)};return this.attachListeners(e,i,s,a),i.setAttribute("href",t),i},e.prototype._linkTagExists=function(e,t){var r,n,o,i,s=document.getElementsByTagName("link");for(r=0,n=s.length;n>r;r++)if(o=s[r].getAttribute("data-name"),i=s[r].getAttribute("href"),o===e||i===t)return!0;return!1},e.prototype.load=function(e,t,r,n){if(this._linkTagExists(e,t))return r(),void 0;var o=this.createLinkTag(e,t,r,n);this._insertLinkNode(o)},e}(),n=function(e){function t(){e.call(this),this._blockedLoads=[],this._mergeStyleSheetsTimeout=-1}return __extends(t,e),t.prototype.load=function(e,t,r,n){if(this._linkTagExists(e,t))return r(),void 0;var o=this.createLinkTag(e,t,r,n);this._styleSheetCount()<31?this._insertLinkNode(o):(this._blockedLoads.push(o),this._handleBlocked())},t.prototype._styleSheetCount=function(){var e=document.getElementsByTagName("link").length,t=document.getElementsByTagName("style").length;return e+t},t.prototype._onLoad=function(t,r){e.prototype._onLoad.call(this,t,r),this._handleBlocked()},t.prototype._onLoadError=function(t,r,n){e.prototype._onLoadError.call(this,t,r,n),this._handleBlocked()},t.prototype._handleBlocked=function(){var e=this,t=this._blockedLoads.length;t>0&&-1===this._mergeStyleSheetsTimeout&&(this._mergeStyleSheetsTimeout=window.setTimeout(function(){return e._mergeStyleSheets()},0))},t.prototype._mergeStyleSheet=function(e,t,r,n){for(var o=n.rules.length-1;o>=0;o--)t.insertRule(a.rewriteUrls(r,e,n.rules[o].cssText),0)},t.prototype._mergeStyleSheets=function(){this._mergeStyleSheetsTimeout=-1;var e,t=this._blockedLoads.length,r=document.getElementsByTagName("link"),n=r.length,o=[];for(e=0;n>e;e++)("loaded"===r[e].readyState||"complete"===r[e].readyState)&&o.push({linkNode:r[e],rulesLength:r[e].styleSheet.rules.length});var i=o.length,s=Math.min(Math.floor(i/2),t);o.sort(function(e,t){return t.rulesLength-e.rulesLength});var a,u;for(e=0;s>e;e++)a=o.length-1-e,u=e%(o.length-s),this._mergeStyleSheet(o[u].linkNode.href,o[u].linkNode.styleSheet,o[a].linkNode.href,o[a].linkNode.styleSheet),o[a].linkNode.parentNode.removeChild(o[a].linkNode),n--;for(var l=this._styleSheetCount();31>l&&this._blockedLoads.length>0;)this._insertLinkNode(this._blockedLoads.shift()),l++},t}(r),o=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.attachListeners=function(e,t,r){t.onload=function(){t.onload=null,r()}},t}(n),i=function(){function e(){this.fs=require.nodeRequire("fs")}return e.prototype.load=function(t,r,n){var o=this.fs.readFileSync(r,"utf8");o.charCodeAt(0)===e.BOM_CHAR_CODE&&(o=o.substring(1)),n(o)},e.BOM_CHAR_CODE=65279,e}(),s=function(){function e(e){this.cssLoader=e}return e.prototype.load=function(t,r,n,o){o=o||{};var i=r.toUrl(t+".css");this.cssLoader.load(t,i,function(r){o.isBuild&&(e.BUILD_MAP[t]=r),n({})},function(){"function"==typeof n.error&&n.error("Could not find "+i+" or it was empty")})},e.prototype.write=function(r,n,o){var i=o.getEntryPoint();t.entryPoints=t.entryPoints||{},t.entryPoints[i]=t.entryPoints[i]||[],t.entryPoints[i].push({moduleName:n,contents:e.BUILD_MAP[n]}),o.asModule(r+"!"+n,"define(['vs/css!"+i+"'], {});")},e.prototype.writeFile=function(e,r,n,o){if(t.entryPoints&&t.entryPoints.hasOwnProperty(r)){for(var i=n.toUrl(r+".css"),s=["/*---------------------------------------------------------"," * Copyright (C) Microsoft Corporation. All rights reserved."," *--------------------------------------------------------*/"],u=t.entryPoints[r],l=0;l<u.length;l++)s.push(a.rewriteUrls(u[l].moduleName,r,u[l].contents));o(i,s.join("\r\n"))}},e.BUILD_MAP={},e}();e.CSSPlugin=s;var a=function(){function e(){}return e.startsWith=function(e,t){return e.length>=t.length&&e.substr(0,t.length)===t},e.pathOf=function(e){var t=e.lastIndexOf("/");return-1!==t?e.substr(0,t+1):""},e.joinPaths=function(t,r){function n(t,r){return e.startsWith(t,r)?Math.max(r.length,t.indexOf("/",r.length)):0}function o(e,t){if("./"!==t){if("../"===t){var r=e.length>0?e[e.length-1]:null;if(r&&"/"===r)return;if(r&&"../"!==r)return e.pop(),void 0}e.push(t)}}function i(e,t){for(;t.length>0;){var r=t.indexOf("/"),n=r>=0?t.substring(0,r+1):t;t=r>=0?t.substring(r+1):"",o(e,n)}}var s=0;s=s||n(t,"//"),s=s||n(t,"http://"),s=s||n(t,"https://");var a=[];return i(a,t.substr(s)),r.length>0&&"/"===r.charAt(0)&&(a=[]),i(a,r),t.substring(0,s)+a.join("")},e.commonPrefix=function(e,t){for(var r=Math.min(e.length,t.length),n=0;r>n&&e.charCodeAt(n)===t.charCodeAt(n);n++);return e.substring(0,n)},e.commonFolderPrefix=function(t,r){var n=e.commonPrefix(t,r),o=n.lastIndexOf("/");return-1===o?"":n.substring(0,o+1)},e.relativePath=function(t,r){if(e.startsWith(r,"/")||e.startsWith(r,"http://")||e.startsWith(r,"https://"))return r;var n=e.commonFolderPrefix(t,r);t=t.substr(n.length),r=r.substr(n.length);for(var o=t.split("/").length,i="",s=1;o>s;s++)i+="../";return i+r},e.rewriteUrls=function(t,r,n){return n.replace(/url\(\s*([^\)]+)\s*\)?/g,function(){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=n[0];for(('"'===i.charAt(0)||"'"===i.charAt(0))&&(i=i.substring(1));i.length>0&&(" "===i.charAt(i.length-1)||"	"===i.charAt(i.length-1));)i=i.substring(0,i.length-1);if(('"'===i.charAt(i.length-1)||"'"===i.charAt(i.length-1))&&(i=i.substring(0,i.length-1)),!e.startsWith(i,"data:")&&!e.startsWith(i,"http://")&&!e.startsWith(i,"https://")){var s=e.joinPaths(e.pathOf(t),i);i=e.relativePath(r,s)}return"url("+i+")"})},e}();e.Utilities=a,function(){var e=null,t="undefined"!=typeof process&&"undefined"!=typeof process.versions&&"undefined"!=typeof process.versions["atom-shell"];e="undefined"!=typeof process&&process.versions&&process.versions.node&&!t?new i:navigator.userAgent.indexOf("MSIE 9")>=0?new n:navigator.userAgent.indexOf("MSIE 8")>=0?new o:new r,define("vs/css",new s(e))}()}(CSSLoaderPlugin||(CSSLoaderPlugin={}));