/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";var __extends=this.__extends||function(e,r){function s(){this.constructor=e}for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);s.prototype=r.prototype,e.prototype=new s};define("vs/languages/handlebars/handlebars",["require","exports","vs/editor/modes/modes","vs/editor/modes/supports","vs/languages/html/html"],function(e,r,s,n,o){!function(e){e[e.HTML=0]="HTML",e[e.Expression=1]="Expression",e[e.UnescapedExpression=2]="UnescapedExpression"}(r.States||(r.States={}));var t=r.States,a=function(e){function r(r,s,n,o,t,a,i,l){e.call(this,r,s,o,t,a,i,l),this.kind=s,this.handlebarsKind=n,this.lastTagName=o,this.lastAttributeName=t,this.embeddedContentType=a,this.attributeValueQuote=i,this.attributeValue=l}return __extends(r,e),r.prototype.makeClone=function(){return new r(this.getMode(),this.kind,this.handlebarsKind,this.lastTagName,this.lastAttributeName,this.embeddedContentType,this.attributeValueQuote,this.attributeValue)},r.prototype.equals=function(s){return s instanceof r?e.prototype.equals.call(this,s):!1},r.prototype.tokenize=function(r){switch(this.handlebarsKind){case t.HTML:if(r.advanceIfString("{{{").length>0)return this.handlebarsKind=t.UnescapedExpression,{type:"delimiter.expression.unescaped.handlebars",bracket:s.Bracket.Open};if(r.advanceIfString("{{").length>0)return this.handlebarsKind=t.Expression,{type:"delimiter.expression.handlebars",bracket:s.Bracket.Open};break;case t.Expression:case t.UnescapedExpression:if(this.handlebarsKind===t.Expression&&r.advanceIfString("}}").length>0)return this.handlebarsKind=t.HTML,{type:"delimiter.expression.handlebars",bracket:s.Bracket.Close};if(this.handlebarsKind===t.UnescapedExpression&&r.advanceIfString("}}}").length>0)return this.handlebarsKind=t.HTML,{type:"delimiter.expression.unescaped.handlebars",bracket:s.Bracket.Close};if(r.skipWhitespace().length>0)return{type:""};if("#"===r.peek())return r.advanceWhile(/^[^\s}]/),{type:"keyword.helper.handlebars",bracket:s.Bracket.Open};if("/"===r.peek())return r.advanceWhile(/^[^\s}]/),{type:"keyword.helper.handlebars",bracket:s.Bracket.Close};if(r.advanceIfString("else")){var n=r.peek();if(" "===n||"	"===n||"}"===n)return{type:"keyword.helper.handlebars"};r.goBack(4)}if(r.advanceWhile(/^[^\s}]/).length>0)return{type:"variable.identifier.handlebars"}}return e.prototype.tokenize.call(this,r)},r}(o.State);r.HandlebarsState=a;var i=function(e){function r(r,s){e.call(this,r,s),this.formattingSupport=null}return __extends(r,e),r.prototype.asyncCtor=function(){var r=this;return e.prototype.asyncCtor.call(this).then(function(){var e=r.characterPairSupport.getAutoClosingPairs().slice(0).concat([{open:"{",close:"}"}]);r.characterPairSupport=new n.CharacterPairSupport(r,{autoClosingPairs:e.slice(0),surroundingPairs:[{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"}]})})},r.prototype.getInitialState=function(){return new a(this,o.States.Content,t.HTML,"","","","","")},r.prototype.getLeavingNestedModeData=function(r,s){var n=e.prototype.getLeavingNestedModeData.call(this,r,s);return n&&(n.stateAfterNestedMode=new a(this,o.States.Content,t.HTML,"","","","","")),n},r}(o.HTMLMode);r.HandlebarsMode=i});