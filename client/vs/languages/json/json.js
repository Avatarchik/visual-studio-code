/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/platform/configuration/configurationRegistry",["require","exports","vs/nls!vs/languages/json/json","vs/platform/platform","vs/base/objects","vs/base/strings","vs/platform/plugins"],function(e,r,s,n,o,t,a){r.Extensions={Configuration:"base.contributions.configuration"};var i=function(){function e(){this.configurationContributors=[]}return e.prototype.registerConfiguration=function(e){this.configurationContributors.push(e)},e.prototype.getConfigurations=function(){return this.configurationContributors.slice(0)},e.prototype.getConfigurationSchemas=function(){var e={id:"local://configuration/user/settings",description:s.localize("vs_platform_configuration_configurationRegistry",0),type:"object",anyOf:[]},r={id:"local://configuration/workspace/settings",description:s.localize("vs_platform_configuration_configurationRegistry",1),type:"object",anyOf:[]},n={id:"local://configuration/default/settings",description:s.localize("vs_platform_configuration_configurationRegistry",2),$ref:"local://configuration/user/settings"},a=[];return a.push(e),a.push(r),a.push(n),this.configurationContributors.forEach(function(s){var n=o.clone(s);n.id=t.format("local://configuration/{0}/{1}",s.container?s.workspace?"workspace":"user":"internal",s.id),s.container||(s.workspace||e.anyOf.push({$ref:n.id}),r.anyOf.push({$ref:n.id})),a.push(n)}),a},e}(),l=new i;n.Registry.add(r.Extensions.Configuration,l),a.registerPointListener("configuration",function(e){for(var r=0;r<e.length;r++){var s=e[r].contributes.configuration,n=o.clone(s);n.id=e[r].pluginId,l.registerConfiguration(n)}})}),define("vs/languages/json/features/tokenization",["require","exports","vs/editor/modes/modes","vs/base/json"],function(e,r,s,n){function o(e,r){return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new a(e,null,null,!1)},tokenize:function(s,n,o,a){return t(e,r,s,n,o,a)}}}function t(e,r,o,t,i){void 0===i&&(i=0);var l=0,c=!1;switch(t.scanError){case n.ScanError.UnexpectedEndOfString:o='"'+o,l=1;break;case n.ScanError.UnexpectedEndOfComment:o="/*"+o,l=2}var d,m,u=n.createScanner(o),h=t.lastWasColon;for(m={tokens:[],actualStopOffset:o.length,endState:t.clone(),modeTransitions:[{startIndex:0,mode:e}]};;){var b=i+u.getPosition(),p=s.Bracket.None,v="";if(d=u.scan(),d===n.SyntaxKind.EOF)break;if(b===i+u.getPosition())throw new Error("Scanner did not advance, next 3 characters are: "+o.substr(u.getPosition(),3));switch(c&&(b-=l),c=l>0,d){case n.SyntaxKind.OpenBraceToken:p=s.Bracket.Open,v="delimiter.bracket.json";break;case n.SyntaxKind.CloseBraceToken:p=s.Bracket.Close,v="delimiter.bracket.json";break;case n.SyntaxKind.OpenBracketToken:p=s.Bracket.Open,v="delimiter.array.json";break;case n.SyntaxKind.CloseBracketToken:p=s.Bracket.Close,v="delimiter.array.json";break;case n.SyntaxKind.ColonToken:v="delimiter.colon.json";break;case n.SyntaxKind.CommaToken:v="delimiter.comma.json";break;case n.SyntaxKind.TrueKeyword:case n.SyntaxKind.FalseKeyword:case n.SyntaxKind.NullKeyword:v="keyword.json";break;case n.SyntaxKind.StringLiteral:v=h?"string.value.json":"string.key.json";break;case n.SyntaxKind.NumericLiteral:v="number.json"}if(r)switch(d){case n.SyntaxKind.LineCommentTrivia:v="comment.line.json";break;case n.SyntaxKind.BlockCommentTrivia:v="comment.block.json"}""!==v&&(h=d===n.SyntaxKind.ColonToken),m.endState=new a(t.getMode(),t.getStateData(),u.getTokenError(),h),m.tokens.push({startIndex:b,type:v,bracket:p})}return m}r.createTokenizationSupport=o;var a=function(){function e(e,r,s,n){this._mode=e,this._state=r,this.scanError=s,this.lastWasColon=n}return e.prototype.clone=function(){return new e(this._mode,this._state,this.scanError,this.lastWasColon)},e.prototype.equals=function(r){return r===this?!0:r&&r instanceof e?this.scanError===r.scanError&&this.lastWasColon===r.lastWasColon:!1},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(){throw new Error},e.prototype.getStateData=function(){return this._state},e.prototype.setStateData=function(e){this._state=e},e}()});var __extends=this.__extends||function(e,r){function s(){this.constructor=e}for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);s.prototype=r.prototype,e.prototype=new s};define("vs/languages/json/json",["require","exports","vs/platform/configuration/configurationRegistry","vs/editor/modes/supports","vs/editor/modes/modesExtensions","vs/platform/platform","vs/nls!vs/languages/json/json","vs/platform/services","vs/platform/thread/attribute","vs/languages/json/features/tokenization"],function(e,r,s,n,o,t,a,i,l,c){var d=function(e){function r(r,s){var o=this;e.call(this,r,s,i.AsyncDescriptor.create("vs/languages/json/jsonWorker","JSONWorker")),this.tokenizationSupport=c.createTokenizationSupport(this,!0),this.electricCharacterSupport=new n.BracketElectricCharacterSupport(this,{brackets:[{tokenType:"delimiter.bracket.json",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.json",open:"[",close:"]",isElectric:!0}]}),this.extraInfoSupport=this,this.outlineSupport=this,this.outlineGroupLabel=Object.create(null),this.outlineGroupLabel.object=a.localize("vs_languages_json_json",0),this.outlineGroupLabel.array=a.localize("vs_languages_json_json",1),this.outlineGroupLabel.string=a.localize("vs_languages_json_json",2),this.outlineGroupLabel.number=a.localize("vs_languages_json_json",3),this.outlineGroupLabel["boolean"]=a.localize("vs_languages_json_json",4),this.outlineGroupLabel["null"]=a.localize("vs_languages_json_json",5),this.formattingSupport=this,this.characterPairSupport=new n.CharacterPairSupport(this,{autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]}),this.suggestSupport=new n.SuggestSupport(this,{triggerCharacters:[],excludeTokens:["comment.line.json","comment.block.json"],suggest:function(e,r){return o.suggest(e,r)}})}return __extends(r,e),r.prototype.creationDone=function(){if(e.prototype.creationDone.call(this),this._threadService.isInMainThread){var r=t.Registry.as(s.Extensions.Configuration);this._configureWorkerSchemas(r.getConfigurationSchemas())}},r.prototype.getSerializableState=function(){var e=t.Registry.as(s.Extensions.Configuration);return{schemas:e.getConfigurationSchemas()}},r.prototype.setData=function(e){this._worker(function(r){return r.setConfigurationSchemas(e.schemas)})},r.prototype._worker=function(r){return e.prototype._worker.call(this,r)},r.prototype._configureWorkerSchemas=function(e){return this._worker(function(r){return r.setConfigurationSchemas(e)})},r.prototype.computeInfo=function(e,r){return this._worker(function(s){return s.computeInfo(e,r)})},r.prototype.getOutline=function(e){return this._worker(function(r){return r.getOutline(e)})},r.prototype.formatDocument=function(e,r){return this._worker(function(s){return s.format(e,null,r)})},r.prototype.formatRange=function(e,r,s){return this._worker(function(n){return n.format(e,r,s)})},r.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},r.prototype.getNonWordTokenTypes=function(){return["delimiter.json","delimiter.bracket.json","delimiter.array.json"]},r.prototype.getWordDefinition=function(){return r.WORD_DEFINITION},r.$_configureWorkerSchemas=l.AllWorkers(r,r.prototype._configureWorkerSchemas),r.$computeInfo=l.OneWorker(r,r.prototype.computeInfo),r.$getOutline=l.OneWorker(r,r.prototype.getOutline),r.$formatDocument=l.OneWorker(r,r.prototype.formatDocument),r.$formatRange=l.OneWorker(r,r.prototype.formatRange),r.WORD_DEFINITION=o.createWordRegExp(".-"),r}(o.AbstractMode);r.JSONMode=d});