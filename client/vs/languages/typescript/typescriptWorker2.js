/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/base/trie",["require","exports","vs/base/collections","vs/base/assert"],function(e,t,r,n){function s(e,t){void 0===t&&(t=h);var n,s;return n={_key:null,_parent:null,_children:{},parent:function(){return null},children:function(e){return void 0===e&&(e=!1),l(this,e)}},s={insert:function(e,r){return a(n,t(e),r)},lookUp:function(e,r){return void 0===r&&(r=!1),o(n,t(e),r)},roots:function(){return l(n,!1)},values:function(){return c(n)},fringe:function(){return u(n)},remove:function(e){return d(e)},forEach:function(e){return p(n,e)}},"undefined"!=typeof e&&r.forEach(e,function(e){s.insert(e.key,e.value)}),s}function a(e,t,r){for(var n=0,s=t.length,a=e;s>n&&(a=e._children[t[n]]);)e=a,n+=1;for(;s>n;)a={_key:t[n],_parent:e,_children:{},parent:function(){return i(this)},children:function(e){return void 0===e&&(e=!1),l(this,e)}},e._children[t[n]]=a,e=a,n+=1;return a.element=r,a}function o(e,t,r){for(var n=0,s=t.length,a=e,o=void 0!==a.element?a:void 0;s>n&&(a=e._children[t[n]]);)e=a,n+=1,void 0!==a.element&&(o=a);return a&&void 0!==a.element?a:r&&void 0!==o?o:null}function i(e){for(;e._parent;){if("undefined"!=typeof e._parent.element)return e._parent;e=e._parent}return null}function l(e,t){for(var n=[],s=r.values(e._children);s.length>0;)e=s.shift(),void 0!==e.element&&n.push(e),(t||void 0===e.element)&&s.push.apply(s,r.values(e._children));return n}function c(e){for(var t=[],n=[e];n.length>0;)e=n.pop(),void 0!==e.element&&t.push(e.element),r.forEach(e._children,function(e){n.push(e.value)});return t}function u(e){for(var t=[e],s=[];t.length>0;){var a=t.pop(),o=t.length;r.forEach(a._children,function(e){t.push(e.value)}),o===t.length&&null!==a._key&&(n.ok("undefined"!=typeof a.element),s.push(a))}return s}function d(e){return e._parent?e._parent._children[e._key]!==e?!1:(delete e._parent._children[e._key],"undefined"==typeof e._parent.element&&m(e._parent._children)&&d(e._parent),!0):!1}function p(e,t){r.forEach(e._children,function(e){void 0!==e.value.element&&t(e.value),p(e.value,t)})}function m(e){if(!e)return!0;for(var t in e)if(f.call(e,t))return!1;return!0}var h=function(e){return e.split("")};t.newTrie=s;var f=Object.prototype.hasOwnProperty}),define("vs/languages/typescript/typescript.configuration",["require","exports","vs/base/objects","vs/base/severity","vs/base/paths","vs/base/trie","vs/base/strings"],function(e,t,r,n,s,a,o){function i(e,t,r){return e instanceof c?e:new c(e,t,r)}function l(e,t){return e instanceof c&&(e=e.raw),t instanceof c&&(t=t.raw),r.equals(e,t)}t.impilictAnyClassifier=function(e){return e.code>=7005&&e.code<=7018?n.Warning:n.Error},t.defaultLintSettings={emptyBlocksWithoutComment:"ignore",curlyBracketsMustNotBeOmitted:"ignore",comparisonOperatorsNotStrict:"ignore",missingSemicolon:"ignore",unknownTypeOfResults:"ignore",semicolonsInsteadOfBlocks:"ignore",functionsInsideLoops:"ignore",functionsWithoutReturnType:"ignore",tripleSlashReferenceAlike:"ignore",unusedImports:"ignore",unusedVariables:"ignore",unusedFunctions:"ignore",unusedMembers:"ignore"},t.defaultValidationSettings={target:"ES5",baseUrl:"",module:"",lint:t.defaultLintSettings},t._internalDefaultValidationSettings={scope:"/",baseUrl:"",noImplicitAny:!1,noLib:!1,extraLibs:["vs/text!vs/languages/typescript/lib/lib.d.ts"],semanticValidation:!0,syntaxValidation:!0,target:"ES5",module:"",lint:t.defaultLintSettings,diagnosticClassifier:t.impilictAnyClassifier},t.defaultSuggestSettings={alwaysAllWords:!1,useCodeSnippetsOnMethodSuggest:!1};var c=function(){function e(e,t,r){this._raw=e,this._defaultCompileSettings=t,this._defaultSuggestSettings=r}return Object.defineProperty(e.prototype,"raw",{get:function(){return this._raw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validate",{get:function(){return this._compileSettings||(this._compileSettings=this._ensureCompileSettings()),this._compileSettings.slice(0)},enumerable:!0,configurable:!0}),e.prototype._ensureCompileSettings=function(){var e=this;if(!this._raw||!this._raw.validate)return[this._defaultCompileSettings];if(Array.isArray(this._raw.validate)){if(0===this._raw.validate.length)return[this._defaultCompileSettings]}else this._raw.validate=[this._raw.validate];var t=a.newTrie(),n=[],i=!1;this._raw.validate.forEach(function(e){var n,a=e.scope;o.isFalsyOrWhitespace(a)?a=s.sep:(a=s.makeAbsolute(a),a=s.normalize(a)),e.scope=a,i=i||a===s.sep,o.isFalsyOrWhitespace(e.module)&&!o.isFalsyOrWhitespace(e.moduleGenTarget)&&(e.module=e.moduleGenTarget),o.isFalsyOrWhitespace(e.target)&&!o.isFalsyOrWhitespace(e.codeGenTarget)&&(e.target=e.codeGenTarget),n=t.lookUp(e.scope),n&&(e=r.withDefaults(e,n.element)),t.insert(e.scope,e)}),i||t.insert(s.sep,this._defaultCompileSettings);for(var l;(l=t.fringe()).length>0;)l.forEach(function(a){for(var o=a.element,i=a.parent(),l=[e._defaultCompileSettings];null!==i;)l.push(i.element),i=i.parent();for(;0!==l.length;)o=r.withDefaults(o,l.pop());o.baseUrl=s.normalize(o.baseUrl),o.baseUrl=s.makeAbsolute(o.baseUrl),t.remove(a),n.unshift(o)});return n.sort(function(e,t){return e.scope.length-t.scope.length}),n},Object.defineProperty(e.prototype,"suggest",{get:function(){return this._suggestSettings||(this._suggestSettings=this._raw&&this._raw.suggest?r.withDefaults(this._raw.suggest,this._defaultSuggestSettings):this._defaultSuggestSettings),r.clone(this._suggestSettings)},enumerable:!0,configurable:!0}),e}();t.sanitize=i,t.equal=l}),define("vs/base/sortedList",["require","exports","vs/base/arrays"],function(e,t,r){var n=function(){function e(t){this.keys=[],this.values=[],this.comparator=t||e.DEFAULT_COMPARATOR}return Object.defineProperty(e.prototype,"count",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.getValueByIndex=function(e){return e>=0&&e<this.values.length?this.values[e]:null},e.prototype.getKey=function(e){return e>=0&&e<this.keys.length?this.keys[e]:null},e.prototype.getKeys=function(){return new a(this.keys)},e.prototype.getValue=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0?this.values[t]:null},e.prototype.getValues=function(){return new a(this.values)},e.prototype.indexOfKey=function(e){if(!e)throw new Error("Key must be defined.");return r.binarySearch(this.keys,e,this.comparator)},e.prototype.add=function(e,t){if(!e||!t)throw new Error("Key and value must be defined.");for(var r=0;r<this.keys.length&&this.comparator(e,this.keys[r])>0;)r++;this.keys.splice(r,0,e),this.values.splice(r,0,t)},e.prototype.remove=function(e){if(!e)throw new Error("Key must be defined.");var t=this.indexOfKey(e);return t>=0&&(this.values.splice(t,1),this.keys.splice(t,1)),t>=0},e.prototype.getIterator=function(){return new s(this.keys,this.values)},e.DEFAULT_COMPARATOR=function(e,t){return t>e?-1:e>t?1:0},e}();t.SortedList=n;var s=function(){function e(e,t){this.keys=e,this.values=t,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.keys.length<this.index?null:{key:this.keys[this.index],value:this.values[this.index]}},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.keys.length},e.prototype.hasNext=function(){return this.index+1<this.keys.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.keys=null,this.values=null},e}(),a=function(){function e(e){this.values=e,this.index=-1}return Object.defineProperty(e.prototype,"current",{get:function(){return this.index<0||this.values.length<this.index?null:this.values[this.index]},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return this.index++,this.index<this.values.length},e.prototype.hasNext=function(){return this.index+1<this.values.length},e.prototype.reset=function(){this.index=-1},e.prototype.dispose=function(){this.values=null},e}()}),define("vs/languages/typescript/features/validationStrategy",["require","exports","vs/base/lifecycle","vs/base/sortedList","vs/platform/services"],function(e,t,r,n,s){function a(e,t){var r=e.reason-t.reason;if(0!==r)return r;if(r=e.type-t.type,0!==r)return r;if(r=t.timestamp-e.timestamp,0!==r)return r;var n=e.resource.toString(),s=t.resource.toString();return s>n?-1:n>s?1:0}!function(e){e[e.ItChanged=1]="ItChanged",e[e.SomeChanged=2]="SomeChanged"}(t.ValidationReason||(t.ValidationReason={}));var o=t.ValidationReason;!function(e){e[e.Syntax=1]="Syntax",e[e.Semantic=2]="Semantic"}(t.ValidationType||(t.ValidationType={}));var i=t.ValidationType,l=function(){function e(e){this._data=new n.SortedList(e)}return Object.defineProperty(e.prototype,"count",{get:function(){return this._data.count},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this._data.indexOfKey(e);return 0>t?(this._data.add(e,!0),!0):!1},e.prototype.remove=function(e){for(var t=this.getIterator(),r=[],n=!1;t.moveNext();)e(t.current)&&(r.push(t.current),n=!0);for(;r.length>0;)this._data.remove(r.pop());return n},e.prototype.contains=function(e){return this._data.indexOfKey(e)>=0},e.prototype.first=function(){var e=this._data.getKey(0);return null!==e&&this._data.remove(e),e},e.prototype.peek=function(){return this._data.getKey(0)},e.prototype.getIterator=function(){return this._data.getKeys()},e}(),c=function(){function e(e,t){var r=this;this._disposeables=[],this._queue=new l(a),this._scheduleHandle=-1,this._resourceService=e.resourceService,this._disposeables.push(this._resourceService.addListener2(s.ResourceEvents.REMOVED,function(e){return r._onResourceRemoved(e.url)})),this._validationCallback=t}return e.prototype._onResourceRemoved=function(e){this._queue.remove(function(t){return t.resource.equals(e)}),0===this._queue.count&&clearTimeout(this._scheduleHandle)},e.prototype.dispose=function(){r.disposeAll(this._disposeables),clearTimeout(this._scheduleHandle),this._queue=null},e.prototype.scheduleValidation=function(e,t){if(e===o.ItChanged)this._queue.remove(function(e){return e.resource.equals(t.getAssociatedResource())}),this._queue.add({reason:e,type:i.Syntax,resource:t.getAssociatedResource(),timestamp:Date.now()}),this._queue.add({reason:e,type:i.Semantic,resource:t.getAssociatedResource(),timestamp:Date.now()});else{for(var r=!1,n=this._queue.getIterator();n.moveNext()&&!r;)n.current.resource.equals(t.getAssociatedResource())&&n.current.reason===o.ItChanged&&n.current.type===i.Semantic&&(r=!0);r||this._queue.add({reason:e,type:i.Semantic,resource:t.getAssociatedResource(),timestamp:Date.now()})}this._scheduleNext()},e.prototype._scheduleNext=function(){var e=this;if(0!==this._queue.count){clearTimeout(this._scheduleHandle);var t=this._queue.peek().reason===o.ItChanged?0:1e3;this._scheduleHandle=setTimeout(function(){var t=e._queue.first();e._validationCallback(t.resource,t.type,t.reason).then(function(){e._scheduleNext()},function(t){console.error(t),e._scheduleNext()}),e._scheduleNext()},t)}},e}();t.ValidationStrategy=c}),define("vs/languages/typescript/project/project",["require","exports","vs/base/lib/winjs.base"],function(e,t,r){var n=function(){function e(e){this._delegates=e}return e.prototype.resolve=function(e){return this._doResolve(e,0)},e.prototype._doResolve=function(e,t){var n=this;return t>=this._delegates.length?r.TPromise.as(null):this._delegates[t].resolve(e).then(function(s){return s?r.TPromise.as(s):n._doResolve(e,t+1)})},e.prototype.accept=function(e){return this._doAccept(e,0)},e.prototype._doAccept=function(e,t){var n=this;return t>=this._delegates.length?r.TPromise.as(null):this._delegates[t].accept(e).then(function(){return n._doAccept(e,t+1)})},e}();t.CompositeContentResolver=n}),define("vs/base/db/indexeddb",["require","exports","vs/base/types","vs/base/lib/winjs.base","vs/base/errors"],function(e,t,r,n,s){function a(){return"undefined"!=typeof indexedDB}function o(e,t,r){return new n.TPromise(function(n,s){var a;a="undefined"!=typeof t?indexedDB.open(e,t):indexedDB.open(e),a.onerror=function(e){return s(e)},a.onsuccess=function(e){return n(new u(e.target.result))},a.onupgradeneeded=function(e){if(!r)return s(e);var t=e.target.result;r({createDataStore:function(e){var r=t.createObjectStore(e.name,{keyPath:e.keyPath,autoIncrement:e.autoIncrement});e.index&&e.index.forEach(function(e){return r.createIndex(e.name,e.keyPath,e.options)})},deleteDataStore:function(e){t.deleteObjectStore(e)}},t)}})}function i(e){return new n.TPromise(function(t,r){e.onsuccess=function(){t(e)},e.onerror=function(t){r(e.error||t)}})}t.canBeUsed=a,function(e){e[e.ReadOnly=0]="ReadOnly",e[e.ReadWrite=1]="ReadWrite",e[e.VersionChange=2]="VersionChange"}(t.TransactionMode||(t.TransactionMode={}));var l,l=t.TransactionMode;!function(e){function t(t){return e[t]?e[t].toLowerCase():null}e.toString=t}(l=t.TransactionMode||(t.TransactionMode={})),function(e){e[e.Next=0]="Next",e[e.NextUnique=1]="NextUnique",e[e.Prev=2]="Prev",e[e.PrevUnique=3]="PrevUnique"}(t.Direction||(t.Direction={}));var c,c=t.Direction;!function(e){function t(t){return e[t]?e[t].toLowerCase():null}e.toString=t}(c=t.Direction||(t.Direction={})),t.openDatabase=o;var u=function(){function e(e){this._db=e}return Object.defineProperty(e.prototype,"db",{get:function(){return this._db},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._db.close()},e.prototype.createTransaction=function(e,t){return"undefined"!=typeof t?this._db.transaction(e,l.toString(t)):this._db.transaction(e)},e.prototype.objectStore=function(e){return this._db.objectStoreNames.contains(e)?new d(e,this):null},e}();t.Database=u;var d=function(){function e(e,t){this._name=e,this._database=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._database.db.transaction(this._name).objectStore(this._name)},enumerable:!0,configurable:!0}),e.prototype.executeTransaction=function(e,t){var r=this;return new n.TPromise(function(n,a){var o,i;try{o=r._database.db.transaction(r._name,l.toString(e))}catch(c){return"InvalidStateError"===c.name&&(c=s.canceled()),a(c)}o.onerror=function(e){return a(e.target.error)},o.oncomplete=function(){return n(i)},o.onabort=function(){return a(s.canceled())};try{i=t(o.objectStore(r._name),o)}catch(c){o.abort(),a(c)}})},e.prototype.openCursor=function(e,t,r,n){return p.openCursor(this,null,e,t,r,n)},e.prototype.openIndexCursor=function(e,t,r,n,s){var a=this;return this.executeTransaction(t,function(){return p.openCursor(a,e,t,r,n,s)}).then(function(e){return e})},e.prototype.get=function(e){return this.executeTransaction(l.ReadOnly,function(t){return i(t.get(e))}).then(function(e){return e}).then(function(e){return e.result})},e}();t.ObjectStore=d;var p;!function(e){function t(e,t,s,a,o,i){var l,u=c.Next;return r.isFunction(a)?i=a:r.isFunction(o)?(l=a,i=o):(l=a,u=o),new n.TPromise(function(r,n){var a,o=[];e.executeTransaction(s,function(e){var r;r=t?e.index(t).openCursor(l,c.toString(u)):e.openCursor(l,c.toString(u)),r.onsuccess=function(t){var r=t.target;r.result&&o.push(i(r.result.value,r.result,e))},r.onerror=function(e){return a=e}}).then(function(){a?n(a):r(o)},n)})}e.openCursor=t}(p||(p={}))});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/project/languageServiceHosts",["require","exports","vs/base/collections","vs/base/lifecycle"],function(e,t,r,n){var s=function(){function e(e){this._original=e}return e.NewInstanceIfRequired=function(t){return t.getLength()>25e5?new e(t):t},e.prototype._getEmptyValue=function(){if(!this._emptyValue){var e=this._original.getLength(),t=this._original.getText(0,e);this._emptyValue=t.replace(/[^\r\n]/g," ")}return this._emptyValue},e.prototype.getText=function(e,t){return this._getEmptyValue().substring(e,t)},e.prototype.getLength=function(){return this._getEmptyValue().length},e.prototype.isOpen=function(){return this._original.isOpen()},e.prototype.getVersionId=function(){return this._original.getVersionId()},e.prototype.getLineStartPositions=function(){return this._original.getLineStartPositions()},e.prototype.getChangeRange=function(e){return this._original.getChangeRange(e)},e}(),a=function(){function e(e,t){this._newSnapshot=e;var r=t.getVersionId()-this._newSnapshot.getVersionId();this._versionIdDelta=1+Math.max(0,r)}return e.prototype.isOpen=function(){return this._newSnapshot.isOpen()},e.prototype.getVersionId=function(){return this._newSnapshot.getVersionId()+this._versionIdDelta},e.prototype.getText=function(e,t){return this._newSnapshot.getText(e,t)},e.prototype.getLength=function(){return this._newSnapshot.getLength()},e.prototype.getLineStartPositions=function(){return this._newSnapshot.getLineStartPositions()},e.prototype.getChangeRange=function(e){return this._newSnapshot.getChangeRange(e)},e}(),o=function(){function e(e){this._versionId=e.getVersionId(),this._value=e.getValue(),this._length=this._value.length,this._lineStarts=[];for(var t=0,r=e.getLineCount();r>t;t++)this._lineStarts.push(e.getLineStart(t+1))}return e.prototype.isOpen=function(){return!0},e.prototype.getVersionId=function(){return this._versionId},e.prototype.getText=function(e,t){return this._value.substring(e,t)},e.prototype.getLength=function(){return this._length},e.prototype.getLineStartPositions=function(){return this._lineStarts},e.prototype.getChangeRange=function(){return null},e}(),i=function(){function e(e){this._snapshot=e}return e.prototype.isOpen=function(){return!1},e.prototype.getVersionId=function(){return-1},e.prototype.getText=function(e,t){return this._snapshot.getText(e,t)},e.prototype.getLength=function(){return this._snapshot.getLength()},e.prototype.getLineStartPositions=function(){return this._snapshot.getLineStartPositions()},e.prototype.getChangeRange=function(){return null},e}(),l=function(){function e(){}return e.prototype.log=function(){},e}();t.NullLogger=l;var c=function(e){function t(t,r,n){var s=this;e.call(this),this._snapshots=Object.create(null),this._disposables=[],this._resourceService=t.resourceService,this._mode=r,this._resourceFilter=n,this._compilationSettings=Object.create(null),this._disposables.push(this._resourceService.addListener2("resource.added",function(){return s._resetStateId()})),this._disposables.push(this._resourceService.addListener2("resource.removed",function(){return s._resetStateId()})),this._disposables.push(this._resourceService.addListener2("resource.changed",function(){return s._resetStateId()}))}return __extends(t,e),t.prototype.dispose=function(){this._snapshots=Object.create(null),n.disposeAll(this._disposables)},t.prototype.getStateId=function(){return this._stateId||(this._stateId=Math.random()),this._stateId},t.prototype._resetStateId=function(){this._stateId=null},t.prototype._insert=function(e,t){t=s.NewInstanceIfRequired(t);var r=this._snapshots[e];return!r||r.getVersionId()<t.getVersionId()?(this._snapshots[e]=t,!0):r.getVersionId()===t.getVersionId()?!1:r.getVersionId()>t.getVersionId()?(this._snapshots[e]=new a(t,r),!0):void 0},t.prototype._sync=function(){if(this._lastSyncedState!==this.getStateId()){var e=Object.create(null);for(var t in this._snapshots)this._snapshots[t]instanceof o&&(e[t]=!0);for(var r=this._resourceService.all(),n=0,s=r.length;s>n;n++)if(this._resourceFilter(r[n])){var a=r[n],i=a.getAssociatedResource().toString();this._insert(i,new o(a))&&this._resetStateId(),delete e[i]}for(var t in e)delete this._snapshots[t],this._stateId=null;this._lastSyncedState=this.getStateId()}},t.prototype.getScriptFileNames=function(){return this._sync(),Object.keys(this._snapshots)},t.prototype.getScriptVersion=function(e){return this._sync(),String(this._snapshots[e].getVersionId())},t.prototype.getScriptIsOpen=function(e){return this._sync(),this._snapshots[e].isOpen()},t.prototype.getScriptSnapshot=function(e){return this._sync(),this._snapshots[e]},t.prototype.getLocalizedDiagnosticMessages=function(){return null},t.prototype.getCancellationToken=function(){return{isCancellationRequested:function(){return!1}}},t.prototype.getCurrentDirectory=function(){return""},t.prototype.getDefaultLibFilename=function(){return"vs/text!vs/languages/typescript/lib/lib.d.ts"},t.prototype.getCompilationSettings=function(){return this._compilationSettings},t}(l);t.MirrorModelLanguageServiceHost=c;var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.addScriptSnapshot=function(e,t){return this.getScriptSnapshot(e)instanceof o?!1:this._insert(e,new i(t))},t.prototype.removeScriptSnapshot=function(e){return this.getScriptSnapshot(e)instanceof o?!1:r.contains(this._snapshots,e)?(delete this._snapshots[e],!0):!1},t}(c);t.ProjectLanguageServiceHost=u}),define("vs/base/graph",["require","exports","vs/base/types","vs/base/collections"],function(e,t,r,n){function s(e){return{data:e,incoming:{},outgoing:{}}}t.newNode=s;var a=function(){function e(e){this._hashFn=e,this._nodes=Object.create(null)}return e.prototype.roots=function(){var e=[];return n.forEach(this._nodes,function(t){r.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e},e.prototype.traverse=function(e,t,r){var n=this.lookup(e);n&&this._traverse(n,t,{},r)},e.prototype._traverse=function(e,t,r,s){var a=this,o=this._hashFn(e.data);if(!n.contains(r,o)){r[o]=!0,s(e.data);var i=t?e.outgoing:e.incoming;n.forEach(i,function(e){return a._traverse(e.value,t,r,s)})}},e.prototype.insertEdge=function(e,t){var r=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);r.outgoing[this._hashFn(t)]=n,n.incoming[this._hashFn(e)]=r},e.prototype.removeNode=function(e){var t=this._hashFn(e);delete this._nodes[t],n.forEach(this._nodes,function(e){delete e.value.outgoing[t],delete e.value.incoming[t]})},e.prototype.lookupOrInsertNode=function(e){var t=this._hashFn(e),r=n.lookup(this._nodes,t);return r||(r=s(e),this._nodes[t]=r),r},e.prototype.lookup=function(e){return n.lookup(this._nodes,this._hashFn(e))},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this._nodes).length},enumerable:!0,configurable:!0}),e}();t.Graph=a}),define("vs/languages/typescript/modulePaths",["require","exports","vs/base/paths","vs/base/strings"],function(e,t,r,n){function s(e,t){return{value:r.join(r.dirname(t),e)}}function a(e,t,s){void 0===s&&(s=n.empty);var a=r.isRelative(e)?r.join(r.dirname(t),e):r.join(s,e);return{value:a+r.extname(t),alternateValue:a+o}}var o=".d.ts";t.internal=s,t.external=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/project/dependencyResolver",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2","vs/base/lib/winjs.base","vs/base/assert","vs/base/graph","vs/base/severity","vs/base/collections","vs/base/network","vs/base/hash","vs/base/strings","vs/base/paths","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/modulePaths","vs/base/lifecycle","vs/languages/typescript/typescript"],function(e,t,r,n,s,a,o,i,l,c,u,d,p,m,h,f){var g=function(){function t(e,t,r){this._implicitDependenciesLoaded=!1,this._disposables=[],this._requestService=e.requestService,this._markerService=e.markerService,this._compileConfig=r,this._basepath=this._requestService.getRequestUrl("root",u.empty,!0),this._resolver=t}return t.prototype.dispose=function(){this._disposables=h.disposeAll(this._disposables)},t.prototype.resolve=function(e,t){var r=this,s=[];if(this._implicitDependenciesLoaded||s.push(this._loadImplicitDependencies(t)),0===e.toString().indexOf(this._basepath)){var a,o=e.toString(),i=this._requestService.getPath("root",e);s.push(this._loadImplicitDeclaredDependencies(t,i)),a=t.getScriptSnapshot(o)?this._loadDeclaredDependencies(t,{filename:i,snapshot:t.getScriptSnapshot(o)}):this._resolver.resolve(i).then(function(e){var n=r._normalizedSnapshot(e.value);return t.addScriptSnapshot(o,n),r._loadDeclaredDependencies(t,{filename:i,snapshot:n})}),s.push(a)}return n.TPromise.join(s).then(function(e){var t=e.reduce(function(e,t){return e+t},0);return t})},t.prototype._loadDeclaredDependencies=function(e,t,r,s){var a=this;return void 0===r&&(r=Object.create(null)),void 0===s&&(s=!0),r[t.filename]=!0,this._loadDeclaredDependenciesFlat(e,t,s).then(function(t){for(var s=[],o=0,i=0,l=t.length;l>i;i++)r[t[i].filename]||(e.addScriptSnapshot(d.join(a._basepath,t[i].filename),t[i].snapshot)&&(o+=1),s.push(a._loadDeclaredDependencies(e,t[i],r,!1)));return n.TPromise.join(s).then(function(e){return e.reduce(function(e,t){return e+t},o)})})},t.prototype._loadDeclaredDependenciesFlat=function(e,t,s){var a=this,i=p.preProcessFile(t.snapshot.getText(0,t.snapshot.getLength()),!0),c=i.importedFiles.concat(i.referencedFiles),u=i.importedFiles.length,h=[],f=s?[]:void 0;return n.TPromise.join(c.map(function(e,n){var i=n>=u?m.internal(e.filename,t.filename):m.external(e.filename,t.filename,a._compileConfig.baseUrl);return a._loadWithContentResolver(i.value,i.alternateValue).then(function(a){if(a)h.push(a);else if(s&&n>=u){var l=t.snapshot.getLineStartPositions(),c=p.getLineAndCharacterOfPosition(l,e.pos),d=p.getLineAndCharacterOfPosition(l,e.end);f.push({message:r.localize("vs_languages_typescript_project_dependencyResolver",0,i.value),severity:o.Error,startLineNumber:c.line,startColumn:c.character,endLineNumber:d.line,endColumn:d.character})}})})).then(function(){return s&&a._markerService.changeOne("typescript.dependencies",l.URL.fromValue(d.join(a._basepath,t.filename)),f),h})},t.prototype._loadWithContentResolver=function(e,t){var r=this;return this._resolver.resolve(e).then(function(s){return s?n.TPromise.as({filename:e,snapshot:r._normalizedSnapshot(s.value)}):t?r._loadWithContentResolver(t,null):null})},t.prototype._loadImplicitDeclaredDependencies=function(e,t){var r=this,s=[],a=Object.create(null);do t=d.dirname(t),s.push(this._loadWithContentResolver(d.join(t,"_references.ts"),d.join(t,"_references.js")).then(function(t){return t?r._loadDeclaredDependencies(e,t,a,!1):n.TPromise.as(0)}));while("."!==t&&"/"!==t&&"\\"!==t);return n.TPromise.join(s).then(function(e){return e.reduce(function(e,t){return e+t},0)})},t.prototype._loadImplicitDependencies=function(e){var t=this,r=0;return n.Promise.join(this._compileConfig.extraLibs.map(function(n){return t._loadBaselib(n).then(function(t){t&&e.addScriptSnapshot(t.filename,t.snapshot)&&(r+=1)})})).then(function(){return t._implicitDependenciesLoaded=!0,r})},t.prototype._loadBaselib=function(t){var r=this;return 0===t.indexOf("vs/text!")||0===d.extname(t).length?new n.TPromise(function(n,s){e([t],function(e){n({filename:t,snapshot:r._normalizedSnapshot(e)})},s)}):this._requestService.makeRequest({url:t}).then(function(e){return 200===e.status?{filename:t,snapshot:r._normalizedSnapshot(e.responseText)}:null},function(e){return console.error("failed to load base lib with path "+t),console.error(e),null})},t.prototype._normalizedSnapshot=function(e){return p.ScriptSnapshot.fromString(e.replace(/\r\n/g,"\n"))},t.prototype.isExtraLib=function(e){return"string"==typeof e?-1!==this._compileConfig.extraLibs.indexOf(e):-1!==this._compileConfig.extraLibs.indexOf(e.toString())},t}();t.DependencyResolver2=g;var v=function(e){function t(t,r,n){var s=this;e.call(this,t,r,n),this._resourceService=t.resourceService,this._disposables.push(t.eventService.addListener2(f.Events.ResourceSetChanged,function(){return s._resetGraph()})),this._disposables.push(this._resourceService.addListener2("resource.changed",function(e){e.url.toString().match(/_references\.(ts|js)$/)&&s._resetGraph()})),this._resetGraph()}return __extends(t,e),t.prototype._resetGraph=function(){this._cache=new a.Graph(function(e){return e.filename})},t.prototype._loadDeclaredDependenciesFlat=function(t,r,a){var o=this,l=this._cache.lookup({filename:r.filename,state:{}}),c=l?l.data.state:{},u=!1;if(this._validateState(r,t,c)){for(var p=i.values(l.outgoing),m=[],h=0,f=p.length;f>h&&!u;h++){var g=p[h].data,v=d.join(this._basepath,g.filename),b=t.getScriptSnapshot(v);b?m.push({filename:g.filename,snapshot:b}):u=!0}if(!u)return n.TPromise.as(m)}else u=!0;return s.ok(u),e.prototype._loadDeclaredDependenciesFlat.call(this,t,r,a).then(function(e){var t={filename:r.filename,state:c};return e.forEach(function(e){return o._cache.insertEdge(t,{filename:e.filename,state:{}})}),e})},t.prototype._validateState=function(e,t,r){var n,s=d.join(this._basepath,e.filename);return t.getScriptSnapshot(s)?r.version!==(n=t.getScriptVersion(s))?(r.version=n,r.referenceState=this._computeReferenceState(e),!1):!0:(r.version=void 0,r.referenceState=this._computeReferenceState(e),!1)},t.prototype._computeReferenceState=function(e){var t=p.preProcessFile(e.snapshot.getText(0,e.snapshot.getLength()),!0),r=11;return t.importedFiles.concat(t.referencedFiles).forEach(function(e){r=c.combine(r,c.computeMurmur2StringHashCode(e.filename)+(59+e.pos)+(61+e.end))}),r},t}(g);t.DependencyResolver3=v}),define("vs/languages/typescript/project/typescriptProject",["require","exports","vs/base/strings","vs/base/lifecycle","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/project/languageServiceHosts","vs/languages/typescript/project/dependencyResolver"],function(e,t,r,n,s,a,o){var i=function(){function e(e,t,r,n,s,a,i){this._disposables=[],this._instantiationService=e.instantiationService,this._requestService=e.requestService,this._dependencyResolver=e.instantiationService.createInstance(o.DependencyResolver3,s,a),this._contentResolver=s,this._mode=t,this._prefix=r,this._resourceFilter=n,this._compileConfig=a,this._suggestConfig=i}return e.prototype.dispose=function(){this._disposables=n.disposeAll(this._disposables)},e.prototype.root=function(){return this._prefix},e.prototype.compileConfiguration=function(){return this._compileConfig},e.prototype.suggestConfiguration=function(){return this._suggestConfig},e.prototype.documentRegistry=function(){return this._documentRegistry||(this._documentRegistry=s.createDocumentRegistry()),this._documentRegistry},e.prototype.syntaxLanguageService=function(){if(!this._syntaxLanguageService){var e=this._instantiationService.createInstance(a.MirrorModelLanguageServiceHost,this._mode,this._resourceFilter);this._applyCompileConfig(e.getCompilationSettings()),e.getCompilationSettings().noLib=!0;var t=s.createLanguageService(e,this.documentRegistry());t.host=e,this._syntaxLanguageService=t,this._disposables.push(e)}return this._syntaxLanguageService},e.prototype.semanticLanguageService=function(){if(!this._semanticLanguageService){var e=this._instantiationService.createInstance(a.ProjectLanguageServiceHost,this._mode,this._resourceFilter);this._applyCompileConfig(e.getCompilationSettings());var t=s.createLanguageService(e,this.documentRegistry());t.host=e,this._semanticLanguageService=t,this._disposables.push(e)}return this._semanticLanguageService},e.prototype.dependencyResolver=function(){return this._dependencyResolver},e.prototype.contentResolver=function(){return this._contentResolver},e.prototype.requestService=function(){return this._requestService},e.prototype._applyCompileConfig=function(e){e.allowNonTsExtensions=!0,e.noImplicitAny=this._compileConfig.noImplicitAny,e.target=r.equalsIgnoreCase("ES3",this._compileConfig.target)?s.ScriptTarget.ES3:s.ScriptTarget.ES5,e.module=r.equalsIgnoreCase("commonjs",this._compileConfig.module)?s.ModuleKind.CommonJS:r.equalsIgnoreCase("amd",this._compileConfig.module)?s.ModuleKind.AMD:s.ModuleKind.None},e}();t.TypeScriptProject=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/project/projectResolver",["require","exports","vs/base/env","vs/base/hash","vs/base/strings","vs/base/paths","vs/base/errors","vs/base/lifecycle","vs/base/collections","vs/base/db/indexeddb","vs/base/lib/winjs.base","vs/platform/services","vs/languages/typescript/typescript","vs/base/trie"],function(e,t,r,n,s,a,o,i,l,c,u,d,p,m){var h;
!function(e){function t(e){return"monaco_"+n.computeMurmur2StringHashCode(e)}function r(t,r){return c.openDatabase(t,1,function(t,r){for(var n=0,s=r.objectStoreNames.length;s>n;n++)t.deleteDataStore(r.objectStoreNames.item(n));t.createDataStore({name:e.storeName,keyPath:e.keyPath,index:[e.workspaceIndexOptions]})}).then(function(t){return r.push(t),t.objectStore(e.storeName)},function(){return null})}e.databaseName=t,e.keyPath="workspaceAbsolutePath",e.storeName="cache",e.workspaceIndexOptions={name:"workspaceName",keyPath:"workspaceName",options:{unique:!1}},e.openStore=r}(h||(h={}));var f=function(){function e(){}return e.prototype.resolve=function(){return null},e.Instance=new e,e}();t.NullProjectResolver=f;var g;!function(e){function t(e,t,r){for(var n=m.newTrie({},function(e){return e.split(a.sep).filter(function(e){return!s.isFalsyOrWhitespace(e)})}),o=m.newTrie(),i=!1,l=0,c=e.length;c>l;l++){var u=e[l];u&&(u.type===d.Files.FileChangeType.DELETED?o.insert(u.path,u):(u.type===d.Files.FileChangeType.ADDED||u.type===d.Files.FileChangeType.UPDATED)&&n.insert(u.path,u))}o.roots().forEach(function(e){r(e.element.path),i=!0});for(var p=n.roots();p.length>0;){var h=p.shift(),u=h.element;if(u.type===d.Files.FileChangeType.ADDED)t(u.path);else if(u.type===d.Files.FileChangeType.UPDATED){var f=h.children(),c=f.length;if(0===c)continue;for(var g=0,l=0;c>l;l++)f[l].element.type===d.Files.FileChangeType.ADDED&&(g+=1);g>1?(t(u.path),i=!0):p.push.apply(p,f)}}return i}e.minimize=t}(g=t.FileEventProcessing||(t.FileEventProcessing={}));var v=function(){function e(e,t){var r=this;this._fileService=e.fileService,this._eventService=e.eventService,this._options=t,this._disposables=[];var n=e.eventService.addListener(d.Files.EventType.FILE_CHANGES,function(e){var t=e.filter(function(e,t){return!t.some(function(e){return".git"===e||"node_modules"===e})}).changes;g.minimize(t,function(e){return r._handleAdded(e)},function(e){return r._handleDelete(e)})&&r._eventService.emit(p.Events.ResourceSetChanged)});this._disposables.push({dispose:n}),this._pendingOperations=[u.TPromise.timeout(0).then(function(){return r._resolveStatsAndContents("/")})]}return e.prototype.dispose=function(){this._disposables=i.disposeAll(this._disposables)},e.prototype._handleDelete=function(e){this._pendingOperations.push(u.TPromise.as({removed:[e]}))},e.prototype._handleAdded=function(e){this._pendingOperations.push(this._resolveStatsAndContents(e))},e.prototype.resolve=function(){var e=this,t=this._pendingOperations.length;if(0===t)return u.TPromise.as({});if(this._resolverError)return u.TPromise.wrapError(this._resolverError);var r={added:[],removed:[],hasChanges:!1};return u.TPromise.join(this._pendingOperations.splice(0,t).map(function(t){return t.then(function(e){r.added.push.apply(r.added,e.added),r.removed.push.apply(r.removed,e.removed),r.hasChanges=r.hasChanges||e.hasChanges},function(t){if(!o.isPromiseCanceledError(t))throw e._resolverError=t,t})})).then(function(){return r},function(t){e._resolverError=t})},e.prototype._resolveStatsAndContents=function(e){var t=this;return this._fetchStats(e).then(function(r){return t._fetchContents(e,r)},function(e){if(404===e.status)return[];throw e}).then(function(e){return{added:e}})},e.prototype._fetchStats=function(e){return this._fileService.resolveFileStats(e,this._options.pattern)},e.prototype._fetchContents=function(e,t){return this._fileService.resolveContents(t.map(function(e){return e.path}))},e}(),b=function(){function e(){this._value=Object.create(null)}return e.prototype.change=function(){this._value=Object.create(null)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(),y=function(e){function t(t,r){e.call(this,t,r),this._workspaceName=t.contextService.getWorkspace()?t.contextService.getWorkspace().name:"__NO_WORKSPACE__",this._databaseName=h.databaseName(r.modeId),this._state=new b}return __extends(t,e),t.prototype._getObjectStore=function(){return this._objectStorePromise||(this._objectStorePromise=h.openStore(this._databaseName,this._disposables)),this._objectStorePromise},t.prototype._handleDelete=function(t){var r=this;this._pendingOperations.push(this._getObjectStore().then(function(e){return e?e.openIndexCursor(h.workspaceIndexOptions.name,c.TransactionMode.ReadWrite,IDBKeyRange.only(r._workspaceName),function(e,n,s){a.isEqualOrParent(e.content.path,t)&&(s.delete(e.workspaceAbsolutePath),r._state.change()),n.continue()}):void 0})),e.prototype._handleDelete.call(this,t)},t.prototype._resolveStatsAndContents=function(t){var r=this,n=this._state.value;return e.prototype._resolveStatsAndContents.call(this,t).then(function(e){return e.hasChanges=n!==r._state.value,e})},t.prototype._fetchContents=function(t,r){var n=this;return this._getObjectStore().then(function(s){return s?n._doFetchContents(s,t,r).then(function(e){return e.persistedContents.concat(e.volatileContents)}):e.prototype._fetchContents.call(n,t,r)})},t.prototype._doFetchContents=function(t,r,n){var s=this,i=a.join(this._workspaceName,r),u={},p={volatileContents:[],persistedContents:[]};return n.forEach(function(e){var t=a.join(s._workspaceName,e.path);if(l.lookupOrInsert(u,t,e)!==e)throw new Error("path collision between two different stat objects. path: "+t)}),t.openIndexCursor(h.workspaceIndexOptions.name,c.TransactionMode.ReadWrite,IDBKeyRange.only(this._workspaceName),function(e,t,r){var n=l.lookup(u,e.workspaceAbsolutePath);a.isEqualOrParent(e.workspaceAbsolutePath,i)&&(n&&n.etag===e.content.etag&&d.Files.isIContent(e.content)?(delete u[e.workspaceAbsolutePath],p.persistedContents.push(e.content)):(r.delete(e.workspaceAbsolutePath),s._state.change())),t.continue()}).then(function(){return e.prototype._fetchContents.call(s,r,l.values(u))}).then(function(e){return t.executeTransaction(c.TransactionMode.ReadWrite,function(t){e.forEach(function(e){t.put({workspaceName:s._workspaceName,workspaceAbsolutePath:a.join(s._workspaceName,e.path),content:{resource:void 0,charset:e.charset,etag:e.etag,mime:e.mime,mtime:e.mtime,name:e.name,path:e.path,value:e.value}}),s._state.change(),p.persistedContents.push(e)})}).then(void 0,function(t){if(!o.isPromiseCanceledError(t))throw t;p.volatileContents=e})}).then(function(){return p})},t}(v),w=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._doFetchContents=function(t,r,n){return e.prototype._doFetchContents.call(this,t,r,n).then(function(e){return e.persistedContents.length=0,e})},t}(y),_=function(){function e(e,t){this._delegate=e.fileService?c.canBeUsed()?r.browser.isFirefox?e.instantiationService.createInstance(y,t):e.instantiationService.createInstance(w,t):e.instantiationService.createInstance(v,t):f.Instance}return e.prototype.resolve=function(){return this._delegate.resolve()},e}();t.ProjectResolver=_;var T=function(){function e(e,t){this._disposables=[],this._workspaceName=e.contextService.getWorkspace()?e.contextService.getWorkspace().name:"__NO_WORKSPACE__",this._databaseName=h.databaseName(t)}return e.prototype.dispose=function(){this._disposables=i.disposeAll(this._disposables)},e.prototype.resolve=function(e){if(s.isFalsyOrWhitespace(this._workspaceName))return u.TPromise.as(null);var t=a.join(this._workspaceName,e);return this._getObjectStore().then(function(e){return e?e.get(t).then(function(e){return e?e.content:null}):null})},e.prototype.accept=function(e){var t,r=this;return new u.TPromise(function(n,s){r._getObjectStore().then(function(n){return n?n.openIndexCursor(h.workspaceIndexOptions.name,c.TransactionMode.ReadWrite,IDBKeyRange.only(r._workspaceName),function(r,n){e(r.content),t||n.continue()}):void 0}).then(function(){return n(null)},s)},function(){t=o.canceled()})},e.prototype._getObjectStore=function(){return this._objectStorePromise||(this._objectStorePromise=h.openStore(this._databaseName,this._disposables)),this._objectStorePromise},e}();t.DatabaseContentResolver=T}),define("vs/languages/typescript/features/converter",["require","exports"],function(e,t){function r(e,t){return e.getPositionFromLineAndCharacter(t.lineNumber,t.column)}function n(e,t){return e.getPositionFromLineAndCharacter(t.startLineNumber,t.startColumn)}function s(e,t){return e.getPositionFromLineAndCharacter(t.endLineNumber,t.endColumn)}function a(e,t){t=i(e,t);var r=e.getLineAndCharacterFromPosition(t);return{lineNumber:r.line,column:r.character}}function o(e,t,r,n){if(void 0===n&&(n=!1),t=i(e,t),r=i(e,r),n){var s=e.getLineAndCharacterFromPosition(t);return{startLineNumber:s.line,startColumn:s.character,endLineNumber:s.line,endColumn:s.character}}var s=e.getLineAndCharacterFromPosition(t),a=e.getLineAndCharacterFromPosition(r);return{startLineNumber:s.line,startColumn:s.character,endLineNumber:a.line,endColumn:a.character}}function i(e,t){var r=e.getFullWidth();return t>r?r:t}t.getOffset=r,t.getStartOffset=n,t.getEndOffset=s,t.getPosition=a,t.getRange=o}),define("vs/languages/typescript/features/moduleLinks",["require","exports","vs/base/network","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/modulePaths","vs/languages/typescript/features/converter"],function(e,t,r,n,s,a){function o(e,t){for(var r=0,n=e.referencedFiles.length;n>r;r++){var s=e.referencedFiles[r];if(t>=s.pos&&t<s.end)return{path:s.filename,external:!1}}}function i(e,t){var r=n.getTokenAtPosition(e,t);return r.kind===n.SyntaxKind.StringLiteral&&r.parent.kind===n.SyntaxKind.ExternalModuleReference?{path:r.text,external:!0}:void 0}function l(e,t){var r=n.getTokenAtPosition(e,t);if(r.kind===n.SyntaxKind.StringLiteral&&r.parent.kind===n.SyntaxKind.CallExpression&&"require"===n.getTextOfNode(r.parent.expression))return{path:r.text,external:!0}}function c(e,t){var r=n.getTokenAtPosition(e,t);if(r.kind===n.SyntaxKind.StringLiteral&&r.parent.kind===n.SyntaxKind.ArrayLiteralExpression)return{path:r.text,external:!0}}function u(e,t,n,u,d){for(var p,m=a.getOffset(e,n),h=[o,i,l,c],f=0;!p&&f<h.length;f++)p=h[f](e,m);if(!p)return null;var g,v=p.external?s.external(p.path,t,d):s.internal(p.path,t);return u.getScriptSnapshot(v.value)?g=v.value:v.alternateValue&&u.getScriptSnapshot(v.alternateValue)&&(g=v.alternateValue),g?{resourceUrl:new r.URL(g),range:{startLineNumber:1,startColumn:1,endLineNumber:Number.MAX_VALUE,endColumn:Number.MAX_VALUE}}:null}t.findLink=u}),define("vs/languages/typescript/features/format",["require","exports","vs/languages/typescript/features/converter"],function(e,t,r){function n(e,t,n){var s=t.toString(),a=e.getSourceFile(s);return e.getFormattingEditsForDocument(s,o(n)).map(function(e){return{text:e.newText,range:r.getRange(a,e.span.start(),e.span.end())}})}function s(e,t,n,s){var a=t.toString(),i=e.getSourceFile(a),l=r.getStartOffset(i,n),c=r.getEndOffset(i,n);return e.getFormattingEditsForRange(a,l,c,o(s)).map(function(e){return{text:e.newText,range:r.getRange(i,e.span.start(),e.span.end())}})}function a(e,t,n,s,a){var i=t.toString(),l=e.getSourceFile(i),c=r.getOffset(l,n);return e.getFormattingEditsAfterKeystroke(i,c,s,o(a)).map(function(e){return{text:e.newText,range:r.getRange(l,e.span.start(),e.span.end())}})}function o(e){return{IndentSize:e.tabSize,TabSize:e.tabSize,NewLineCharacter:"\n",ConvertTabsToSpaces:e.insertSpaces,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,PlaceOpenBraceOnNewLineForFunctions:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1}}t.formatDocument=n,t.formatRange=s,t.formatAfterKeystroke=a}),define("vs/languages/typescript/features/logicalSelection",["require","exports","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter"],function(e,t,r,n){function s(e,t,s){for(var a=e.getSourceFile(t.toString()),o=n.getOffset(a,s),i=r.getTokenAtPosition(a,o),l=-1,c=-1,u=[];i;){var d=i.getStart(),p=i.getEnd();(d!==l||p!==c)&&u.unshift({type:"node",range:n.getRange(a,d,p)}),l=d,c=p,i=i.parent}return u}t.compute=s}),define("vs/languages/typescript/features/previewer",["require","exports","vs/base/strings"],function(e,t,r){function n(e,t){if(void 0===t&&(t=r.empty),!e)return{};var n=e.map(function(e){return{tagName:"span",text:e.text,className:e.kind}});return{tagName:"div",className:"ts-symbol "+t,children:n}}function s(e){return e?e.map(function(e){return e.text}).join(r.empty):r.empty}t.html=n,t.plain=s}),define("vs/languages/typescript/features/extraInfo",["require","exports","vs/languages/typescript/features/converter","vs/languages/typescript/features/previewer"],function(e,t,r,n){function s(e,t,s){var a,o=t.toString(),i=e.getSourceFile(o),l=r.getOffset(i,s),c=e.getQuickInfoAtPosition(o,l);if(c){var u=[n.html(c.displayParts),n.html(c.documentation,"documentation")];a={value:"",htmlContent:u,className:"typeInfo ts",range:r.getRange(i,c.textSpan.start(),c.textSpan.end())}}return a}t.compute=s}),define("vs/languages/typescript/features/outline",["require","exports","vs/languages/typescript/features/converter","vs/languages/typescript/lib/typescriptServices"],function(e,t,r,n){function s(e,t){return e.range.startLineNumber<t.range.startLineNumber?-1:e.range.startLineNumber>t.range.startLineNumber?1:e.range.startColumn<t.range.startColumn?-1:e.range.startColumn>t.range.startColumn?1:0}function a(e,t){var r=/\.js$/.test(t.path);return r?l(e,t):o(e,t)}function o(e,t){var r=e.getSourceFile(t.toString()),n=e.getNavigationBarItems(r.filename),a={type:"",label:"",range:void 0,children:[]};return n.filter(function(e){return"<global>"!==e.text}).forEach(function(e){return a.children.push(i(r,e))}),a.children.sort(s)}function i(e,t){var n=t.spans[0],a=r.getRange(e,n.start(),n.end());return{label:t.text,type:c[t.kind]||"variable",range:a,children:t.childItems.map(function(t){return i(e,t)}).sort(s)}}function l(e,t){var a=[],o=e.getSourceFile(t.toString()),i=[];for(o.statements.forEach(function(e){e.kind===n.SyntaxKind.VariableStatement&&e.declarations.forEach(function(e){i.push({label:e.name.text,type:"variable",range:r.getRange(o,e.getStart(),e.getEnd())})}),a.push(e)});a.length;){var l=a.pop(),c="";l.kind===n.SyntaxKind.FunctionDeclaration?c=l.name.text:l.kind===n.SyntaxKind.FunctionExpression&&(l.name?c=l.name.text:l.parent.kind===n.SyntaxKind.PropertyAssignment&&l.parent.name&&(c=""+n.getTextOfNode(l.parent.name)+": function()")),c&&i.push({label:c,type:"function",range:r.getRange(o,l.getStart(),l.getEnd())}),a.push.apply(a,l.getChildren())}return i.sort(s)}var c=Object.create(null);c[n.ScriptElementKind.moduleElement]="module",c[n.ScriptElementKind.classElement]="class",c[n.ScriptElementKind.enumElement]="enum",c[n.ScriptElementKind.interfaceElement]="interface",c[n.ScriptElementKind.memberFunctionElement]="method",c[n.ScriptElementKind.memberVariableElement]="property",c[n.ScriptElementKind.memberGetAccessorElement]="property",c[n.ScriptElementKind.memberSetAccessorElement]="property",c[n.ScriptElementKind.variableElement]="variable",c[n.ScriptElementKind.constElement]="variable",c[n.ScriptElementKind.localVariableElement]="variable",c[n.ScriptElementKind.variableElement]="variable",c[n.ScriptElementKind.functionElement]="function",c[n.ScriptElementKind.localFunctionElement]="function",t.compute=a}),define("vs/languages/typescript/features/occurrences",["require","exports","vs/languages/typescript/features/converter"],function(e,t,r){function n(e,t,n){var s=t.toString(),a=e.getSourceFile(s),o=r.getOffset(a,n),i=e.getOccurrencesAtPosition(s,o);return i?i.map(function(e){return{kind:e.isWriteAccess?"write":null,range:r.getRange(a,e.textSpan.start(),e.textSpan.end())}}):[]}t.compute=n}),define("vs/languages/typescript/features/definitions",["require","exports","vs/base/network","vs/languages/typescript/features/converter"],function(e,t,r,n){function s(e,t,s){var a=t.toString(),o=e.getSourceFile(a),i=n.getOffset(o,s),l=e.getDefinitionAtPosition(a,i);if(!l||0===l.length)return null;var c=l[0];if(!c.fileName)return null;var u=e.getSourceFile(c.fileName);return{resourceUrl:r.URL.fromValue(u.filename),range:n.getRange(u,c.textSpan.start(),c.textSpan.end(),!0)}}function a(){return null}t.findDeclaration=s,t.findTypeDeclaration=a}),define("vs/languages/typescript/features/references",["require","exports","vs/base/network","vs/base/lib/winjs.base","vs/languages/typescript/features/converter","vs/languages/typescript/lib/typescriptServices"],function(e,t,r,n,s,a){function o(e,t,o,c){var u=e.semanticLanguageService(),d=n.TPromise.as(null),p=r.schemas.inMemory===t.getScheme();if(!p&&i(u,t,o)){var m=u.getSourceFile(t.toString()),h=s.getOffset(m,o),f=a.getTokenAtPosition(m,h);if(!f)return console.warn("NO token found at offset"),n.TPromise.as([]);var g=e.dependencyResolver(),v=e.requestService(),b=[],y=a.getTextOfNode(f);d=e.contentResolver().accept(function(e){if(e.value.indexOf(y)>=0){var t=r.URL.fromEncoded(v.getRequestUrl("root",e.path,!0));b.push(g.resolve(t,u.host))}}).then(function(){return n.TPromise.join(b)})}return d.then(function(){return l(u,t,o,c,p)})}function i(e,t,r){var n=t.toString(),o=e.getSourceFile(n),i=s.getOffset(o,r),l=a.getTokenAtPosition(o,i);return l.symbol?l.symbol.declarations.some(function(e){return e.flags&a.NodeFlags.Export?!0:e.flags&a.NodeFlags.Public?!0:e.flags&a.NodeFlags.Protected?!0:!1}):!0}function l(e,t,n,a,o){var i,l=t.toString(),u=e.getSourceFile(l),d=s.getOffset(u,n);return i=o?e.getOccurrencesAtPosition(l,d):e.getReferencesAtPosition(l,d),i?i.filter(function(t){var r=e.getSourceFile(t.fileName);return a||!c(r,t.textSpan.start(),t.textSpan.end())}).map(function(t){var n=e.getSourceFile(t.fileName),a={resourceUrl:r.URL.fromValue(t.fileName),range:s.getRange(n,t.textSpan.start(),t.textSpan.end())};return a}):[]}function c(e,t){var r=a.getTokenAtPosition(e,t).parent;return r&&a.isDeclaration(r)}t.find=o}),define("vs/languages/typescript/features/codelens",["require","exports","vs/base/lib/winjs.base","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter","vs/languages/typescript/features/references"],function(e,t,r,n,s,a){function o(e,t){var r=t.toString(),n=e.getSourceFile(r),a=[];return n.getNamedDeclarations().forEach(function(e){l[e.kind]===!0&&a.push({range:s.getRange(n,e.name.getStart(),e.name.getEnd())})}),a}function i(e,t,n){var s=e.semanticLanguageService().host.getStateId(),o=n.map(function(n){return n.languageModeStateId===s?r.TPromise.as(null):a.find(e,t,n.position,!1)});return r.TPromise.join(o).then(function(e){return{references:e,languageModeStateId:s}})}var l=Object.create(null);l[n.SyntaxKind.ModuleDeclaration]=!0,l[n.SyntaxKind.InterfaceDeclaration]=!0,l[n.SyntaxKind.ClassDeclaration]=!0,l[n.SyntaxKind.ConstructSignature]=!0,l[n.SyntaxKind.GetAccessor]=!0,l[n.SyntaxKind.SetAccessor]=!0,l[n.SyntaxKind.Property]=!0,l[n.SyntaxKind.Method]=!0,l[n.SyntaxKind.FunctionDeclaration]=!0,l[n.SyntaxKind.FunctionExpression]=!0,l[n.SyntaxKind.EnumDeclaration]=!0,l[n.SyntaxKind.EnumMember]=!0,t.getCodeLensSymbols=o,t.findCodeLensReferences=i}),define("vs/languages/typescript/features/parameterHints",["require","exports","vs/base/strings","vs/languages/typescript/features/converter","vs/languages/typescript/features/previewer"],function(e,t,r,n,s){function a(e,t,a){var o=t.toString(),i=e.getSourceFile(o),l=n.getOffset(i,a),c=e.getSignatureHelpItems(o,l);if(!c)return null;var u={currentSignature:c.selectedItemIndex,currentParameter:c.argumentIndex,signatures:[]};return c.items.forEach(function(e){var t={label:r.empty,documentation:null,parameters:[]};t.label+=s.plain(e.prefixDisplayParts),e.parameters.forEach(function(r,n,a){var o=s.plain(r.displayParts),i={label:o,documentation:s.plain(r.documentation),signatureLabelOffset:t.label.length,signatureLabelEnd:t.label.length+o.length};t.label+=o,t.parameters.push(i),n<a.length-1&&(t.label+=s.plain(e.separatorDisplayParts))}),t.label+=s.plain(e.suffixDisplayParts),u.signatures.push(t)}),u}t.compute=a}),define("vs/languages/lib/javascriptSnippets",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2"],function(e,t,r){t.snippets=[{type:"snippet",label:"define",codeSnippet:["define([","	'require',","	'{{require}}'","], function(require, {{factory}}) {","	'use strict';","	{{}}","});"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",0)},{type:"snippet",label:"for",codeSnippet:["for (var {{index}} = 0; {{index}} < {{array}}.length; {{index}}++) {","	var {{element}} = {{array}}[{{index}}];","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",1)},{type:"snippet",label:"foreach",codeSnippet:["{{array}}.forEach(function({{element}}) {","	{{}}","}, this);"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",2)},{type:"snippet",label:"forin",codeSnippet:["for (var {{key}} in {{object}}) {","	if ({{object}}.hasOwnProperty({{key}})) {","		var {{element}} = {{object}}[{{key}}];","		{{}}","	}","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",3)},{type:"snippet",label:"function",codeSnippet:["function {{name}}({{params}}) {","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",4)},{type:"snippet",label:"if",codeSnippet:["if ({{condition}}) {","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",5)},{type:"snippet",label:"ifelse",codeSnippet:["if ({{condition}}) {","	{{}}","} else {","	","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",6)},{type:"snippet",label:"new",codeSnippet:["var {{name}} = new {{type}}({{arguments}});{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",7)},{type:"snippet",label:"switch",codeSnippet:["switch ({{key}}) {","	case {{value}}:","		{{}}","		break;","","	default:","		break;","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",8)},{type:"snippet",label:"while",codeSnippet:["while ({{condition}}) {","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",9)},{type:"snippet",label:"dowhile",codeSnippet:["do {","	{{}}","} while ({{condition}});"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",10)},{type:"snippet",label:"trycatch",codeSnippet:["try {","	{{}}","} catch ({{error}}) {","	","}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",11)},{type:"snippet",label:"log",codeSnippet:["console.log({{message}});{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",12)},{type:"snippet",label:"settimeout",codeSnippet:["setTimeout(function() {","	{{}}","}, {{timeout}});"].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",13)},{type:"snippet",label:"reference",codeSnippet:['/// <reference path="{{}}" />',""].join("\n"),documentationLabel:r.localize("vs_languages_lib_javascriptSnippets",14)}]}),define("vs/languages/typescript/features/typescriptSnippets",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2"],function(e,t,r){t.snippets=[{type:"snippet",label:"foreach =>",codeSnippet:["{{array}}.forEach(({{element}}:{{type}}) => {","	{{}}","});"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",0)},{type:"snippet",label:"jsdoc comment",codeSnippet:["/**"," * {{}}"," */"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",1)},{type:"snippet",label:"ctor",codeSnippet:["/**"," *"," */","constructor() {","	super();","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",2)},{type:"snippet",label:"class",codeSnippet:["/**"," * {{name}}"," */","class {{name}} {","	constructor({{parameters}}) {","		{{}}","	}","}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",3)},{type:"snippet",label:"public method",codeSnippet:["/**"," * {{name}}"," */","public {{name}}() {","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",4)},{type:"snippet",label:"private method",codeSnippet:["private {{name}}() {","	{{}}","}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",5)},{type:"snippet",label:"import statement",codeSnippet:["import {{name}} = require('{{}}');"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",6)},{type:"snippet",label:"do",codeSnippet:["do {","	{{// code...}}","} while ({{a <= 10}});"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",7)},{type:"snippet",label:"get",codeSnippet:["","public get {{value}}() : {{string}} {","	{{return {{}}}}","}",""].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",8)},{type:"snippet",label:"log",codeSnippet:["console.log({{_}});","{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",9)},{type:"snippet",label:"prop",codeSnippet:["","private _{{value}} : {{string}};","public get {{value}}() : {{string}} {","	return this._{{value}};","}","public set {{value}}(v : {{string}}) {","	this._{{value}} = v;","}",""].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",10)},{type:"snippet",label:"ref",codeSnippet:['/// <reference path="{{_}}" />',"{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",11)},{type:"snippet",label:"ret0",codeSnippet:["return false;{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",12)},{type:"snippet",label:"ret1",codeSnippet:["return true;{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",13)},{type:"snippet",label:"ret",codeSnippet:["return {{_}};{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",14)},{type:"snippet",label:"set",codeSnippet:["","public set {{value}}(v : {{string}}) {","	this.{{_}} = v;","}",""].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",15)},{type:"snippet",label:"throw",codeSnippet:['throw "{{_}}";',"{{}}"].join("\n"),documentationLabel:r.localize("vs_languages_typescript_features_typescriptSnippets",16)}]}),define("vs/languages/typescript/features/wordSuggestions",["require","exports","vs/languages/typescript/lib/typescriptServices","vs/base/collections"],function(e,t,r,n){function s(e,t,s){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];var i={};if(s&&n.forEach(e.identifiers,function(e){return i[e.value]=!0}),t)for(var l=r.createScanner(r.ScriptTarget.ES5,!1,e.getFullText()),c=l.scan();c!==r.SyntaxKind.EndOfFileToken;){switch(c){case r.SyntaxKind.SingleLineCommentTrivia:case r.SyntaxKind.MultiLineCommentTrivia:var u=l.getTokenText(),d=u.split(/[^\w]/);d.forEach(function(e){return i[e]=!0})}c=l.scan()}return a.push(""),a.forEach(function(e){return delete i[e]}),n.keys(i)}return s}),define("vs/languages/typescript/features/suggestions",["require","exports","vs/base/collections","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter","vs/languages/typescript/features/previewer","vs/languages/lib/javascriptSnippets","vs/languages/typescript/features/typescriptSnippets","vs/languages/typescript/features/wordSuggestions"],function(e,t,r,n,s,a,o,i,l){function c(e,t){for(var r=t;t>0&&/\w/.test(e.charAt(t-1));)t-=1;return e.substring(t,r)}function u(e){return e.type+e.label+e.codeSnippet}function d(e,t,n,a){var d=t.toString(),p=e.getSourceFile(d),h=s.getOffset(p,n),f=e.getCompletionsAtPosition(d,h),g=r.createStringDictionary();if(f)for(var v=0,b=f.entries.length;b>v;v++){var y=f.entries[v];r.insert(g,{label:y.name,codeSnippet:y.name,type:m(y.kind)},u)}if(!f||!f.isMemberCompletion){for(var v=0,b=o.snippets.length;b>v;v++)r.insert(g,o.snippets[v],u);for(var v=0,b=i.snippets.length;b>v;v++)r.insert(g,i.snippets[v],u)}var w=c(p.getFullText(),h);return a.alwaysAllWords&&l(p,!1,!0,w).every(function(e){return r.insert(g,{label:e,codeSnippet:e,type:"text"},u),!0}),{currentWord:w,suggestions:r.values(g)}}function p(e,t,r,n,o){if("snippet"===n.type)return n;var i=t.toString(),l=e.getSourceFile(i),c=s.getOffset(l,r),u=e.getCompletionEntryDetails(i,c,n.label);if(!u)return n;if(n.documentationLabel=a.plain(u.documentation),n.typeLabel=a.plain(u.displayParts),n.codeSnippet=u.name,o.useCodeSnippetsOnMethodSuggest&&"function"===m(u.kind)){var d,p=u.name;d=u.displayParts.filter(function(e){return"parameterName"===e.kind}).map(function(e){return"{{"+e.text+"}}"}),p+=d.length>0?"("+d.join(", ")+"){{}}":"()",n.codeSnippet=p}return n}function m(e){switch(e){case n.ScriptElementKind.primitiveType:case n.ScriptElementKind.keyword:return"keyword";case n.ScriptElementKind.variableElement:case n.ScriptElementKind.localVariableElement:case n.ScriptElementKind.memberVariableElement:case n.ScriptElementKind.memberGetAccessorElement:case n.ScriptElementKind.memberSetAccessorElement:return"field";case n.ScriptElementKind.functionElement:case n.ScriptElementKind.memberFunctionElement:case n.ScriptElementKind.constructSignatureElement:case n.ScriptElementKind.callSignatureElement:return"function"}return e}t.computeSuggestions=d,t.getSuggestionDetails=p}),define("vs/languages/typescript/features/quickFix",["require","exports","vs/base/network","vs/base/strings","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/features/converter","vs/nls!vs/languages/typescript/typescriptWorker2","vs/base/arrays"],function(e,t,r,n,s,a,o,i){function l(e,t,r,o){var i=t.toString(),l=e.getSourceFile(i),c=a.getOffset(l,{lineNumber:r.endLineNumber,column:r.endColumn}),u=s.findTokenOnLeftOfPosition(l,c);if(!u||0===u.getWidth())return null;var d=JSON.parse(o);switch(d.type){case"rename":var p=l.getLineAndCharacterFromPosition(u.getStart()),m=l.getLineAndCharacterFromPosition(u.getEnd()),h={startLineNumber:p.line,startColumn:p.character,endLineNumber:m.line,endColumn:m.character};return{editOperations:[{range:h,text:d.name}]};case"addglobal":var f=n.format("/* global {0} */\n",d.name),h={startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1};return{editOperations:[{range:h,text:f}]}}return null}function c(e){return!!e.code}function u(e,t,r){if(!c(r))return[];var n=r,s=0;try{s=parseInt(n.code)}catch(a){}var o=[];switch(s){case 2339:d(e,t,n,o);break;case 2304:d(e,t,n,o),p(e,t,n,o)}return o}function d(e,t,r,l){var c=t.toString(),u=e.getSourceFile(c),d=a.getOffset(u,{lineNumber:r.endLineNumber,column:r.endColumn}),p=s.findTokenOnLeftOfPosition(u,d);if(p&&0!==p.getWidth()){var m=s.getTextOfNode(p);m=m.substring(0,m.length-(p.getEnd()-d));var h=e.getCompletionsAtPosition(c,d);if(h&&!i.isFalsyOrEmpty(h.entries)){var f=[];h.entries.forEach(function(e){if(e.name!==m)switch(e.kind){case s.ScriptElementKind.classElement:case s.ScriptElementKind.interfaceElement:case s.ScriptElementKind.typeElement:case s.ScriptElementKind.enumElement:case s.ScriptElementKind.variableElement:case s.ScriptElementKind.localVariableElement:case s.ScriptElementKind.functionElement:case s.ScriptElementKind.localFunctionElement:case s.ScriptElementKind.memberFunctionElement:case s.ScriptElementKind.memberGetAccessorElement:case s.ScriptElementKind.memberSetAccessorElement:case s.ScriptElementKind.memberVariableElement:case s.ScriptElementKind.constructorImplementationElement:case s.ScriptElementKind.callSignatureElement:case s.ScriptElementKind.indexSignatureElement:case s.ScriptElementKind.constructSignatureElement:case s.ScriptElementKind.parameterElement:case s.ScriptElementKind.primitiveType:var t=n.difference(m,e.name);
if(t<m.length/2)return;f.push({label:o.localize("vs_languages_typescript_features_quickFix",0,e.name),id:JSON.stringify({type:"rename",name:e.name}),score:t})}}),f.sort(function(e,t){return t.score-e.score});for(var g=Math.min(3,f.length),v=0;g>v;v++)l.push(f[v])}}}function p(e,t,i,l){var c=t.toString(),u=e.getSourceFile(c),d=a.getOffset(u,{lineNumber:i.endLineNumber,column:i.endColumn}),p=s.findTokenOnLeftOfPosition(u,d);if(p&&0!==p.getWidth()){var m=s.getTextOfNode(p),h=R[m];if(h&&r.schemas.inMemory!==t.getScheme()){var f=Array.isArray(h)?h:[h];f.forEach(function(e){l.push({label:o.localize("vs_languages_typescript_features_quickFix",1,e),id:JSON.stringify({type:"addtripleslash",name:e}),score:1})})}n.endsWith(t.path,".js")&&l.push({label:o.localize("vs_languages_typescript_features_quickFix",2,m),id:JSON.stringify({type:"addglobal",name:m}),score:1})}}t.evaluate=l,t.compute=u;var m="angularjs/angular.d.ts",h="jquery/jquery.d.ts",f="node/node.d.ts",g="mocha/mocha.d.ts",v="underscore/underscore.d.ts",b="knockout/knockout.d.ts",y="backbone/backbone.d.ts",w="d3/d3.d.ts",_="qunit/qunit.d.ts",T="react/react.d.ts",E="ember/ember.d.ts",k="lodash/lodash.d.ts",S="mustache/mustache.d.ts",x="async/async.d.ts",C="browserify/browserify.d.ts",A="cordova/cordova.d.ts",L="gruntjs/gruntjs.d.ts",N="gulp/gulp.d.ts",b="knockout/knockout.d.ts",P="sinon/sinon.d.ts",O="jasmine/jasmine.d.ts",R={angular:m,$:h,jquery:h,process:f,__dirname:f,describe:[g,O],it:[g,O],_:[v,k],ko:b,Backbone:y,d3:w,QUnit:_,React:T,Ember:E,Mustache:S,async:x,browserify:C,cordova:A,grunt:L,gulp:N,sinon:P}}),define("vs/languages/typescript/lint/rules/layout",["require","exports","vs/base/strings","vs/languages/typescript/lib/typescriptServices"],function(e,t,r,n){var s=function(){function e(){this.code="SA1503",this.name="CurlyBracketsMustNotBeOmitted",this.filter=[n.SyntaxKind.IfStatement,n.SyntaxKind.ElseKeyword,n.SyntaxKind.DoStatement,n.SyntaxKind.ForInStatement,n.SyntaxKind.ForStatement,n.SyntaxKind.WhileStatement]}return e.prototype.checkNode=function(e,t){if(e.kind===n.SyntaxKind.IfStatement){var r=e;if(r.elseStatement&&r.elseStatement.kind===n.SyntaxKind.IfStatement)return;r.thenStatement&&r.thenStatement.kind!==n.SyntaxKind.Block&&t.reportError(r.thenStatement,this.name,this.code),r.elseStatement&&r.elseStatement.kind!==n.SyntaxKind.Block&&t.reportError(r.elseStatement,this.name,this.code)}else{var s=e;s.statement&&s.statement.kind!==n.SyntaxKind.Block&&t.reportError(s.statement,this.name,this.code)}},e}();t.CurlyBracketsMustNotBeOmitted=s;var a=function(){function e(){this.code="SA1514",this.name="EmptyBlocksWithoutComment",this.filter=[n.SyntaxKind.Block]}return e.prototype.checkNode=function(e,t){e.statements.pos<e.statements.end||n.getTextOfNode(e).match(/\/\/|\/|\*/)||t.reportError(e,this.name,this.code)},e.prototype._hasComment=function(e){var t=e.getChildAt(1);if(t){var s=n.getTextOfNode(t);if(s&&r.trimWhitespace(s).length>0)return!0}return!1},e}();t.EmptyBlocksWithoutComment=a}),define("vs/languages/typescript/lint/rules/typescript",["require","exports","vs/base/strings","vs/languages/typescript/lib/typescriptServices"],function(e,t,r,n){var s=function(){function e(){this.code="SA9002",this.name="FunctionsWithoutReturnType",this.filter=[n.SyntaxKind.FunctionDeclaration,n.SyntaxKind.Method,n.SyntaxKind.ArrowFunction]}return e.prototype.checkNode=function(e,t){e.type||t.reportError(e.name,this.name,this.code)},e}();t.FunctionsWithoutReturnType=s;var a=function(){function e(){this.code="SA9056",this.name="TripleSlashReferenceAlike",this.filter=[n.SyntaxKind.SourceFile]}return e.prototype.checkNode=function(e,t){var r=e.getLeadingTriviaWidth(),n=e.getFullText().substr(0,r);this._couldMeanTripleSlash(n)&&t.reportError(e,this.name,this.code,0,r)},e.prototype._couldMeanTripleSlash=function(t){if(e._TripleSlashReference.test(t))return!1;var n=t.split(/[\s=]/);if(!(n.length>5)){for(var s=0,a=0,o=0,i=0,l=n.length;l>i;i++)s=Math.max(s,r.difference("reference",n[i])),a=Math.max(a,r.difference("path",n[i])),o=Math.max(o,(r.startsWith(n[i],'"')||r.startsWith(n[i],"'")?1:0)+(r.endsWith(n[i],'"')||r.endsWith(n[i],"'")?1:0));return(o>0||a>5)&&s>5?!0:!1}},e._TripleSlashReference=/^(\/\/\/\s*<reference\s+path=)('|")(.+?)\2\s*(static=('|")(.+?)\2\s*)*/im,e}();t.TripleSlashReferenceAlike=a;var o=function(){function e(){this.code="SA9057",this.name="UnusedImports",this.filter=[n.SyntaxKind.ImportDeclaration]}return e.prototype.checkNode=function(e,t){var r=n.getTokenPosOfNode(e.name),s=t.languageService().getOccurrencesAtPosition(t.filename(),r);s&&1===s.length&&t.reportError(e,this.name,this.code,n.getTokenPosOfNode(e))},e}();t.UnusedImports=o;var i=function(){function e(){this.code="SA9058",this.name="UnusedVariables",this.filter=[n.SyntaxKind.VariableStatement]}return e.prototype.checkNode=function(e,t){var r=this;if(!(e.flags&n.NodeFlags.Export)&&e.parent.kind!==n.SyntaxKind.SourceFile){for(var s,a,o=e.parent;o&&!s;){switch(o.kind){case n.SyntaxKind.Constructor:case n.SyntaxKind.Method:case n.SyntaxKind.FunctionDeclaration:case n.SyntaxKind.FunctionExpression:case n.SyntaxKind.GetAccessor:case n.SyntaxKind.SetAccessor:s=o.body}o=o.parent}var i;if(s){var a=s.getFullText(),l=s.getFullStart();i=function(e){for(var r=0,n=0;2>r&&(n=a.indexOf(e.name.text,n),-1!==n);){n+=e.name.text.length;var s=t.languageService().getDefinitionAtPosition(t.filename(),l+n);s&&s.length>0&&s[0].textSpan.containsPosition(e.name.getStart())&&(r+=1)}return r>1}}else i=function(e){var r,s=n.getTokenPosOfNode(e.name);return r=t.languageService().getOccurrencesAtPosition(t.filename(),s),r.length>1};e.declarations.forEach(function(e){i(e)||t.reportError(e.name,r.name,r.code)})}},e}();t.UnusedVariables=i;var l=function(){function e(){this.code="SA9059",this.name="UnusedFunctions",this.filter=[n.SyntaxKind.FunctionDeclaration]}return e.prototype.checkNode=function(e,t){if(!(e.flags&n.NodeFlags.Export||e.flags&n.NodeFlags.DeclarationFile)){var r=n.getTokenPosOfNode(e.name),s=t.languageService().getOccurrencesAtPosition(t.filename(),r);s&&s.length<=1&&t.reportError(e.name,this.name,this.code,r)}},e}();t.UnusedFunctions=l;var c=function(){function e(){this.code="SA9060",this.name="UnusedMembers",this.filter=[n.SyntaxKind.Property,n.SyntaxKind.Method]}return e.prototype.checkNode=function(e,t){if(e.flags&n.NodeFlags.Private&&e.name){var r=n.getTokenPosOfNode(e.name),s=t.languageService().getOccurrencesAtPosition(t.filename(),r);s&&s.length<=1&&t.reportError(e.name,this.name,this.code,r)}},e}();t.UnusedMembers=c}),define("vs/languages/typescript/lint/rules/javascript",["require","exports","vs/base/strings","vs/base/collections","vs/languages/typescript/lib/typescriptServices"],function(e,t,r,n,s){function a(e,t){var r=[],n=function(e){e&&r.push(e)};e.getChildren().forEach(n);do e=r.shift(),e&&(t(e),e.getChildren().forEach(n));while(r.length>0)}var o=function(){function e(){this.code="SA9005",this.name="ComparisonOperatorsNotStrict",this.filter=[s.SyntaxKind.BinaryExpression]}return e.prototype.checkNode=function(e,t){if(e.operator===s.SyntaxKind.EqualsEqualsToken||e.operator===s.SyntaxKind.ExclamationEqualsToken){var r=e.right.pos-2;t.reportError(e,this.name,this.code,r,2)}},e}();t.ComparisonOperatorsNotStrict=o;var i=function(){function e(){this.code="SA9050",this.name="MissingSemicolon",this.filter=[s.SyntaxKind.VariableStatement,s.SyntaxKind.ExpressionStatement,s.SyntaxKind.ReturnStatement,s.SyntaxKind.Property]}return e.prototype.checkNode=function(e,t){var r=s.findChildOfKind(e,s.SyntaxKind.SemicolonToken);if(!r){var n=s.getTokenPosOfNode(e)+e.getWidth()-1;t.reportError(e,this.name,this.code,n,1)}},e}();t.MissingSemicolon=i;var l=n.createNumberDictionary();l[s.SyntaxKind.ClassKeyword]=!0,l[s.SyntaxKind.ConstKeyword]=!0,l[s.SyntaxKind.EnumKeyword]=!0,l[s.SyntaxKind.ExportKeyword]=!0,l[s.SyntaxKind.ExtendsKeyword]=!0,l[s.SyntaxKind.ImportKeyword]=!0,l[s.SyntaxKind.SuperKeyword]=!0;var c=function(){function e(){this.code="SA9051",this.name="ReservedKeywords",this.filter=[s.SyntaxKind.SourceFile]}return e.prototype.checkNode=function(e,t){var r=this;a(e,function(e){n.contains(l,e.kind)&&t.reportError(e,r.name,r.code)})},e}();t.ReservedKeywords=c;var u=n.createNumberDictionary();u[s.SyntaxKind.ImplementsKeyword]=!0,u[s.SyntaxKind.InterfaceKeyword]=!0,u[s.SyntaxKind.LetKeyword]=!0,u[s.SyntaxKind.PackageKeyword]=!0,u[s.SyntaxKind.PrivateKeyword]=!0,u[s.SyntaxKind.ProtectedKeyword]=!0,u[s.SyntaxKind.PublicKeyword]=!0,u[s.SyntaxKind.StaticKeyword]=!0,u[s.SyntaxKind.YieldKeyword]=!0,u[s.SyntaxKind.NumberKeyword]=!0,u[s.SyntaxKind.DeclareKeyword]=!0,u[s.SyntaxKind.StringKeyword]=!0,u[s.SyntaxKind.BooleanKeyword]=!0;var d=function(){function e(){this.code="SA9052",this.name="TypeScriptSpecifics",this.filter=[s.SyntaxKind.SourceFile]}return e.prototype.checkNode=function(e,t){var r=this;a(e,function(e){(n.contains(l,e.kind)||n.contains(u,e.kind))&&t.reportError(e,r.name,r.code)})},e}();t.TypeScriptSpecifics=d;var p=function(){function e(){this.code="SA9053",this.filter=[s.SyntaxKind.BinaryExpression],this.name="UnknownTypeOfResults"}return e.prototype.checkNode=function(t,a){if(t.left&&t.left.kind===s.SyntaxKind.TypeOfExpression){var o=!1;if(t.right.kind===s.SyntaxKind.StringLiteral){var i=s.getTextOfNode(t.right);i=r.trim(i,"'"),i=r.trim(i,'"'),o=!n.contains(e._AllowedStrings,i)}else t.right.kind===s.SyntaxKind.NullKeyword?o=!0:"undefined"===s.getTextOfNode(t.right)&&(o=!0);o&&a.reportError(t,this.name,this.code)}},e._AllowedStrings={undefined:!0,object:!0,function:!0,boolean:!0,number:!0,string:!0},e}();t.UnknownTypeOfResults=p;var m=function(){function e(){this.code="SA9054",this.name="SemicolonsInsteadOfBlocks",this.filter=[s.SyntaxKind.IfStatement,s.SyntaxKind.ElseKeyword,s.SyntaxKind.WhileStatement,s.SyntaxKind.ForStatement,s.SyntaxKind.ForInStatement]}return e.prototype.checkNode=function(e,t){if(e.kind===s.SyntaxKind.IfStatement){var r=e;(r.thenStatement&&r.thenStatement.kind===s.SyntaxKind.EmptyStatement||r.elseStatement&&r.elseStatement.kind===s.SyntaxKind.EmptyStatement)&&t.reportError(r,this.name,this.code)}var n=e;n&&n.statement&&n.statement.kind===s.SyntaxKind.EmptyStatement&&t.reportError(n,this.name,this.code)},e}();t.SemicolonsInsteadOfBlocks=m;var h=function(){function e(){this.code="SA9055",this.name="FunctionsInsideLoops",this.filter=[s.SyntaxKind.FunctionExpression,s.SyntaxKind.FunctionDeclaration,s.SyntaxKind.ArrowFunction]}return e.prototype.checkNode=function(e,t){for(var r=e.parent;r;){if(r.kind===s.SyntaxKind.ForStatement||r.kind===s.SyntaxKind.ForInStatement||r.kind===s.SyntaxKind.WhileStatement||r.kind===s.SyntaxKind.DoStatement){t.reportError(e,this.name,this.code);break}r=r.parent}},e}();t.FunctionsInsideLoops=h;var f=function(){function e(){this.code="SA9062",this.name="NewOnLowercaseFunctions",this.filter=[s.SyntaxKind.NewExpression]}return e.prototype.checkNode=function(e,t){var r=e.expression;r.kind===s.SyntaxKind.PropertyAccessExpression&&(r=r.name);var n=s.getTextOfNode(r);n&&!n.charAt(0).match(/[A-Z_]/)&&t.reportError(r,this.name,this.code)},e}();t.NewOnLowercaseFunctions=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/lint/lint",["require","exports","vs/nls!vs/languages/typescript/typescriptWorker2","vs/base/severity","vs/base/types","vs/base/collections","vs/languages/typescript/lib/typescriptServices","./rules/layout","./rules/typescript","./rules/javascript"],function(e,t,r,n,s,a,o,i,l,c){function u(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];"function"==typeof n&&(t[String(r).toLowerCase()]=n)}}function d(e){var t={},r=[];u(i,t),u(c,t),u(l,t);for(var o in e)if(e.hasOwnProperty(o)){var d=a.lookup(t,String(o).toLowerCase());d&&r.push({rule:s.create(d),severity:n.fromValue(e[o])})}return r}function p(e,t,r){var n=d(e),s=new f(t,n);return s.check(t.getSourceFile(r.toString()))}var m=function(){function e(e){this._rules={},this._errors=[];for(var t=0,r=e.length;r>t;t++)this._addRule(e[t])}return e.prototype._addRule=function(e){var t=this,r=function(r){a.lookupOrInsert(t._rules,r,[]).push(e)};e.rule.filter?e.rule.filter.forEach(r):r(-1)},e.prototype.check=function(e){return this._errors.length=0,this._currentSeverity=n.Warning,this._sourceFile=e,this._visit(e),this._errors.slice(0)},e.prototype.reportError=function(e,t,r,n,s){if(e){"undefined"==typeof n&&(n=o.getTokenPosOfNode(e)),"undefined"==typeof s&&(s=e.getWidth());var a=this._sourceFile.getLineAndCharacterFromPosition(n),i=this._sourceFile.getLineAndCharacterFromPosition(n+s);this._errors.push({message:t,code:r,severity:this._currentSeverity,range:{startLineNumber:a.line,startColumn:a.character,endLineNumber:i.line,endColumn:i.character}})}},e.prototype._visit=function(e){var t=this;e&&(this._checkNodeOrToken(e),o.forEachChild(e,function(e){t._visit(e)}))},e.prototype._checkNodeOrToken=function(e){for(var t=a.lookup(this._rules,e.kind,[]).concat(a.lookup(this._rules,-1,[])),r=0,s=t.length;s>r;r++)if(this._currentSeverity=t[r].severity,this._currentSeverity!==n.Ignore)try{t[r].rule.checkNode(e,this)}catch(o){console.error(o)}},e}();t.SimpleStyleRuleChecker=m;var h=function(e){function t(t,r){e.call(this,r),this._languageService=t}return __extends(t,e),t.prototype.languageService=function(){return this._languageService},t.prototype.filename=function(){return this._filename},t.prototype.check=function(t){return this._filename=t.filename,e.prototype.check.call(this,t)},t}(m);t.LanuageServiceStyleRuleChecker=h;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.reportError=function(t,r,n,s,a){return e.prototype.reportError.call(this,t,this._lookupMessage(r,n),n,s,a)},t.prototype._lookupMessage=function(e,t){switch(t){case"SA1503":return r.localize("vs_languages_typescript_lint_lint",0);case"SA1514":return r.localize("vs_languages_typescript_lint_lint",1);case"SA9005":return r.localize("vs_languages_typescript_lint_lint",2);case"SA9050":return r.localize("vs_languages_typescript_lint_lint",3);case"SA9051":return r.localize("vs_languages_typescript_lint_lint",4);case"SA9052":return r.localize("vs_languages_typescript_lint_lint",5);case"SA9053":return r.localize("vs_languages_typescript_lint_lint",6);case"SA9054":return r.localize("vs_languages_typescript_lint_lint",7);case"SA9055":return r.localize("vs_languages_typescript_lint_lint",8);case"SA9062":return r.localize("vs_languages_typescript_lint_lint",9);case"SA9002":return r.localize("vs_languages_typescript_lint_lint",10);case"SA9056":return r.localize("vs_languages_typescript_lint_lint",11);case"SA9057":return r.localize("vs_languages_typescript_lint_lint",12);case"SA9058":return r.localize("vs_languages_typescript_lint_lint",13);case"SA9059":return r.localize("vs_languages_typescript_lint_lint",14);case"SA9060":return r.localize("vs_languages_typescript_lint_lint",15);case"SA9061":return r.localize("vs_languages_typescript_lint_lint",16)}return e},t}(h);t.StyleRuleCheckerWithMessages=f,t.check=p}),define("vs/languages/typescript/features/diagnostics",["require","exports","vs/base/severity","vs/languages/typescript/features/converter","vs/languages/typescript/lint/lint"],function(e,t,r,n,s){function a(e,t,r){if(!r.syntaxValidation)return[];var n=t.toString(),s=e.getSyntacticDiagnostics(n);return s=s.filter(function(e){return 6053!==e.code&&1148!==e.code}),l(e.getSourceFile(n),s,r)}function o(e,t,r){if(!r.semanticValidation)return[];var n=t.toString(),s=e.getSemanticDiagnostics(n);return l(e.getSourceFile(n),s,r)}function i(e,t,r){return r.semanticValidation?s.check(r.lint,e,t).map(function(e){return{message:e.message,severity:e.severity,startLineNumber:e.range.startLineNumber,startColumn:e.range.startColumn,endLineNumber:e.range.endLineNumber,endColumn:e.range.endColumn}}):[]}function l(e,t,s){for(var a=[],o=0;o<t.length;o++){var i=t[o],l=r.Error;if(s.diagnosticClassifier&&(l=s.diagnosticClassifier(i)),l){var c=n.getRange(e,i.start,i.start+i.length);a.push({message:i.messageText,code:String(i.code),severity:l,startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn})}}return a}t.getSyntacticDiagnostics=a,t.getSemanticDiagnostics=o,t.getExtraDiagnostics=i}),define("vs/languages/typescript/features/navigation",["require","exports","vs/languages/typescript/features/converter","vs/base/uri"],function(e,t,r,n){function s(e,t){var s=[];return e.forEach(function(e){var a=e.syntaxLanguageService();a.getNavigateToItems(t).forEach(function(e){s.push({containerName:e.containerName,name:e.name,parameters:"method"===e.kind||"function"===e.kind?"()":"",type:e.kind,resourceUri:n.parse(e.fileName),range:r.getRange(a.getSourceFile(e.fileName),e.textSpan.start(),e.textSpan.end())})})}),s}t.getNavigateToItems=s}),define("vs/languages/typescript/features/emitting",["require","exports","vs/base/strings"],function(e,t,r){function n(e,t,n){var s=e.getEmitOutput(t.toString()),a=s.outputFiles;if(!a)return null;for(var o=0,i=a.length;i>o;o++)if(r.endsWith(a[o].name,n))return{filename:a[o].name,content:a[o].text};return null}t.getEmitOutput=n}),define("vs/languages/typescript/features/rename",["require","exports","vs/languages/typescript/features/converter"],function(e,t,r){function n(e,t,n,s){var a,o,i=e.semanticLanguageService(),l=t.toString(),c=i.getSourceFile(l),u=r.getOffset(c,n);return a=i.getRenameInfo(l,u),o={currentName:a.displayName,edits:[]},a.canRename?(o.edits=i.findRenameLocations(l,u,!1,!1).filter(function(t){return!e.dependencyResolver().isExtraLib(t.fileName)}).map(function(e){return{resource:e.fileName,newText:s,range:r.getRange(i.getSourceFile(e.fileName),e.textSpan.start(),e.textSpan.end())}}),o):(o.rejectReason=a.localizedErrorMessage,o)}return n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/typescriptWorker2",["require","exports","vs/base/lib/winjs.base","vs/base/arrays","vs/base/network","vs/base/strings","vs/base/uuid","vs/base/trie","vs/base/errors","vs/base/collections","vs/base/lifecycle","vs/editor/worker/modesWorker","vs/editor/core/model/mirrorModel","vs/platform/services","vs/languages/typescript/typescript.configuration","vs/languages/typescript/features/validationStrategy","vs/languages/typescript/project/project","vs/languages/typescript/typescript","vs/base/db/indexeddb","vs/base/paths","vs/languages/typescript/project/typescriptProject","vs/languages/typescript/project/projectResolver","vs/languages/typescript/features/moduleLinks","vs/languages/typescript/features/format","vs/languages/typescript/features/logicalSelection","vs/languages/typescript/features/extraInfo","vs/languages/typescript/features/outline","vs/languages/typescript/features/occurrences","vs/languages/typescript/features/definitions","vs/languages/typescript/features/codelens","vs/languages/typescript/features/references","vs/languages/typescript/features/parameterHints","vs/languages/typescript/features/suggestions","vs/languages/typescript/features/quickFix","vs/languages/typescript/features/diagnostics","vs/languages/typescript/features/navigation","vs/languages/typescript/features/emitting","vs/editor/modes/supports","vs/languages/typescript/features/rename"],function(e,t,r,n,s,a,o,i,l,c,u,d,p,m,h,f,g,v,b,y,w,_,T,E,k,S,x,C,A,L,N,P,O,R,I,D,M,V,F){var $=function(){function e(e,t){this._resourceService=e.resourceService,this._filter=t,this._basepath=e.requestService.getRequestUrl("root",a.empty,!0),this._contextService=e.contextService}return e.prototype.resolve=function(e){var t=s.URL.fromValue(y.join(this._basepath,e)),n=this._resourceService.get(t);if(!(n instanceof p.AbstractMirrorModel&&this._filter(n)))return r.TPromise.as(null);var a=n;return r.TPromise.as({resource:this._contextService.toResource(e),value:a.getValue(),path:e})},e.prototype.accept=function(e){var t=this,n=null;return new r.TPromise(function(r,s){t._resourceService.all().every(function(r){if(n)return s(n),!1;if(!(r instanceof p.AbstractMirrorModel))return!0;var o=r;return t._basepath&&a.startsWith(o.getAssociatedResource().toString(),t._basepath)?t._filter(r)?(e({resource:o.getAssociatedResource(),value:o.getValue(),path:o.getAssociatedResource().toString().substring(t._basepath.length),name:void 0,mtime:void 0,etag:void 0,mime:void 0}),!0):!0:!0}),r(null)},function(){n=l.canceled()})},e}(),B=function(e){function t(t,r,n){var s=this;e.call(this,t,r,n),this._callOnDispose=[],this._disposables=[],this._contents=Object.create(null),this._instantiationService=t.instantiationService,this._telemetryService=t.telemetryService,this._requestService=t.requestService,this._uuid=o.v4().asHex(),this._validationStrategy=this._instantiationService.createInstance(f.ValidationStrategy,this._validate.bind(this)),this._disposables.push(this._validationStrategy),this._eventService=t.eventService,this._callOnDispose.push(this.resourceService.addListener(m.ResourceEvents.ADDED,function(e){return s._onResourceAddedOrRemoved(e.url)})),this._callOnDispose.push(this.resourceService.addListener(m.ResourceEvents.REMOVED,function(e){return s._onResourceAddedOrRemoved(e.url)})),this.configure(null)}return __extends(t,e),t.prototype._createInPlaceReplaceSupport=function(){return new V.InplaceReplaceSupport(this.resourceService,this)},t.prototype.dispose=function(){this._callOnDispose=u.cAll(this._callOnDispose),this._disposables=u.disposeAll(this._disposables)},t.prototype._doConfigure=function(e){var t=this,s=this._options,o=h.sanitize(e,h._internalDefaultValidationSettings,h.defaultSuggestSettings);if(s){var l={};s.validate.forEach(function(e){return l[e.scope]=e.extraLibs}),o.validate.forEach(function(e){return e.extraLibs=n.merge([e.extraLibs,c.lookup(l,e.scope,[])],function(e){return e})})}if(this._options&&h.equal(this._options,o))return r.TPromise.as(!1);this._projects&&u.disposeAll(this._projects.values()),this._projects=i.newTrie(),this._options=o;var d=n.coalesce([this._requestService.getRequestUrl("root",a.empty,!0),"inmemory://model/"]),p=[this._instantiationService.createInstance($,this._isMirrorModelAndMyMode.bind(this)),this];b.canBeUsed()&&p.push(this._instantiationService.createInstance(_.DatabaseContentResolver,this._getMode().getId()));var m=new g.CompositeContentResolver(p);return d.forEach(function(e){t._options.validate.forEach(function(r){var n,s=y.join(e,r.scope);n=function(e){if(!t._isMirrorModelAndMyMode(e))return!1;var r=t.findProject(e.getAssociatedResource()).root();return s===r},t._projects.insert(s,t._createProject(s,m,n,r,t._options.suggest))})}),this._projects.insert(a.empty,this._createProject(a.empty,m,this._isMirrorModelAndMyMode.bind(this),h._internalDefaultValidationSettings,this._options.suggest)),r.TPromise.as(!0)},t.prototype._isMirrorModelAndMyMode=function(e){return e instanceof p.AbstractMirrorModel?e.getModeId()!==this._getMode().getId()?!1:!0:!1},t.prototype._createProject=function(e,t,r,n,s){return this._instantiationService.createInstance(w.TypeScriptProject,this._getMode(),e,r,t,n,s)},t.prototype.findProject=function(e){var t=this._projects.lookUp(e.toString(),!0);if(t)return t.element;throw l.illegalState("no project found for: "+e.toString())},t.prototype.getProjects=function(){return this._projects.values().filter(function(e){return e.root()!==a.empty})},t.prototype.resolveDependenciesAndRun=function(e,t){var r=this.findProject(e);return r.dependencyResolver().resolve(e,r.semanticLanguageService().host).then(function(){try{return t(r)}catch(e){throw e}})},t.prototype.acceptProjectDelta=function(e){var t=this,r=e.hasChanges;n.isFalsyOrEmpty(e.added)||(e.added.forEach(function(e){return t._contents[e.path]=e}),r=!0),n.isFalsyOrEmpty(e.removed)||e.removed.forEach(function(e){e[0]!==y.sep&&(e=y.sep+e),Object.keys(t._contents).forEach(function(r){y.isEqualOrParent(r,e)&&delete t._contents[r]});var n=t._requestService.getRequestUrl("root","",!0);t.getProjects().forEach(function(t){var s=t.semanticLanguageService().host;r=s.getScriptFileNames().filter(function(t){return y.isEqualOrParent(t,y.join(n,e))}).map(function(e){return s.removeScriptSnapshot(e)}).reduce(function(e,t){return e||t},!1)||r})}),r&&(this._eventService.emit(v.Events.ResourceSetChanged),this._validationHelper.trigger())},t.prototype.resolve=function(e){return e[0]!==y.sep&&(e=y.sep+e),r.TPromise.as(this._contents[e])},t.prototype.accept=function(e){var t=this,n=null;return new r.TPromise(function(r,s){c.forEach(t._contents,function(t){e(t.value)}),n?s(n):r(null)},function(){n=l.canceled()})},t.prototype.doValidateOnChange=function(e,t,r){for(var n=0;n<e.length;n++){var s=this.resourceService.get(e[n]);this._validationStrategy.scheduleValidation(f.ValidationReason.ItChanged,s)}for(var n=0;n<t.length;n++){var s=this.resourceService.get(t[n]),a=f.ValidationReason.SomeChanged;r&&(a=f.ValidationReason.ItChanged),this._validationStrategy.scheduleValidation(a,s)}},t.prototype._onResourceAddedOrRemoved=function(e){var t=this.resourceService.get(e);this._shouldIncludeModelInValidation(t)&&(this._eventService.emit(v.Events.ResourceSetChanged),this._validationHelper.trigger())},t.prototype._validate=function(e,t,n){var s=this;if(t===f.ValidationType.Syntax){var a=this.findProject(e),o=I.getSyntacticDiagnostics(a.syntaxLanguageService(),e,a.compileConfiguration()),i=this._publishMarkersForResource(e,t,o);return r.TPromise.as(i)}return t===f.ValidationType.Semantic?this.resolveDependenciesAndRun(e,function(r){var a,o=r.semanticLanguageService(),i=r.compileConfiguration();a=I.getSemanticDiagnostics(o,e,i),n===f.ValidationReason.ItChanged&&a.push.apply(a,I.getExtraDiagnostics(o,e,i)),s._publishMarkersForResource(e,t,a)}):r.TPromise.as(null)},t.prototype._publishMarkersForResource=function(e,t,r){var n=a.format("{0}/{1}",this._uuid,t);return this.markerService.changeOne(n,e,r),r.length>0},t.prototype._getContextForValidationParticipants=function(e){var t=this.findProject(e).syntaxLanguageService(),r=t.host.getScriptFileNames(),n=e.toString();return r.indexOf(n)<0?null:this.findProject(e).syntaxLanguageService().getSourceFile(n)},t.prototype.doSuggest=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return O.computeSuggestions(r.semanticLanguageService(),e,t,r.suggestConfiguration())})},t.prototype._getSuggestContext=function(e){var t=this.findProject(e);return r.TPromise.as({syntaxTree:t.syntaxLanguageService().getSourceFile(e.toString()),compilationSettings:t.compileConfiguration(),project:t})},t.prototype.getSuggestionDetails=function(e,t,r){return this.resolveDependenciesAndRun(e,function(n){return O.getSuggestionDetails(n.semanticLanguageService(),e,t,r,n.suggestConfiguration())})},t.prototype.runQuickFixAction=function(e,t,r){return this.resolveDependenciesAndRun(e,function(n){return R.evaluate(n.semanticLanguageService(),e,t,r)})},t.prototype.getQuickFixes=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return R.compute(r.semanticLanguageService(),e,t)})},t.prototype.getEmitOutput=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return M.getEmitOutput(r.semanticLanguageService(),e,t)})},t.prototype.getNavigateToItems=function(e){return D.getNavigateToItems(this.getProjects(),e)},t.prototype.getParameterHints=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return P.compute(r.semanticLanguageService(),e,t)})},t.prototype.findDeclaration=function(e,t){return r.TPromise.join([this._findLinkTarget(e,t),this._findTypeScriptDeclaration(e,t)]).then(function(e){return n.coalesce(e)[0]||null})},t.prototype._findLinkTarget=function(e,t){return this.resolveDependenciesAndRun(e,function(r){var n=e.toString(),s=r.syntaxLanguageService().getSourceFile(n);return T.findLink(s,n,t,r.semanticLanguageService().host,r.root())})},t.prototype.textReplace=function(e,t){var r=[["true","false"],["string","number","boolean","void","any"],["private","public"]];return V.ReplaceSupport.valueSetsReplace(r,e,t)},t.prototype.findCodeLensSymbols=function(e){return L.getCodeLensSymbols(this.findProject(e).syntaxLanguageService(),e)},t.prototype.findCodeLensReferences=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return L.findCodeLensReferences(r,e,t)}).then(function(e){return e})},t.prototype.findReferences=function(e,t,r){return this.resolveDependenciesAndRun(e,function(n){return N.find(n,e,t,r)}).then(function(e){return e})},t.prototype.computeInfo=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return S.compute(r.semanticLanguageService(),e,t)})},t.prototype.findOccurrences=function(e,t,r){return this.resolveDependenciesAndRun(e,function(n){return C.compute(n.semanticLanguageService(),e,t,r)})},t.prototype._findTypeScriptDeclaration=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return A.findDeclaration(r.semanticLanguageService(),e,t)})},t.prototype.findTypeDeclaration=function(e,t){return this.resolveDependenciesAndRun(e,function(r){return A.findTypeDeclaration(r.semanticLanguageService(),e,t)})},t.prototype.getOutline=function(e){return x.compute(this.findProject(e).syntaxLanguageService(),e)},t.prototype.formatDocument=function(e,t){return E.formatDocument(this.findProject(e).syntaxLanguageService(),e,t)},t.prototype.formatRange=function(e,t,r){return E.formatRange(this.findProject(e).syntaxLanguageService(),e,t,r)},t.prototype.formatAfterKeystroke=function(e,t,r,n){return E.formatAfterKeystroke(this.findProject(e).syntaxLanguageService(),e,t,r,n)},t.prototype.getRangesToPosition=function(e,t){return k.compute(this.findProject(e).syntaxLanguageService(),e,t)},t.prototype.rename=function(e,t,r){return this.resolveDependenciesAndRun(s.URL.fromUri(e),function(n){return F(n,e,t,r)})},t}(d.AbstractWorkerMode);t.TypeScriptWorker2=B});