/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/base/lifecycle",["require","exports"],function(e,t){function r(e){for(var t=0,r=e.length;r>t;t++)e[t]&&e[t].dispose();return[]}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return{dispose:function(){return r(e)}}}function s(e){return{dispose:function(){return r(e)}}}function a(e){return{dispose:function(){return e()}}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return s(e.map(a))}function i(e){if(e){if("function"==typeof e)return e(),null;if(Array.isArray(e)){for(;e.length>0;)e.pop()();return e}return null}return null}t.disposeAll=r,t.combinedDispose=n,t.combinedDispose2=s,t.fnToDisposable=a,t.toDisposable=o,t.cAll=i;var l=function(){function e(e){this._prefix=e,this._lastId=0}return e.prototype.generate=function(){return this._prefix+ ++this._lastId},e}();t.IdGenerator=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/base/uuid",["require","exports"],function(e,t){function r(e,t){return"function"==typeof e[t]&&0===e[t].length}function n(e){return e instanceof i||e instanceof l||r(e,"asHex",0)&&r(e,"equals",1)}function s(){return new l}function a(e){if(!c.test(e))throw new Error("invalid uuid");return new i(e)}function o(){return s().asHex()}t.isUUID=n;var i=function(){function e(e){this._value=e}return e.prototype.asHex=function(){return this._value},e.prototype.equals=function(e){return this.asHex()===e.asHex()},e}(),l=function(e){function t(){e.call(this,[t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}return __extends(t,e),t._oneOf=function(e){var t=Math.floor(e.length*Math.random());return e[t]},t._randomHex=function(){return t._oneOf(t._chars)},t._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],t._timeHighBits=["8","9","a","b"],t}(i);t.empty=new i("00000000-0000-0000-0000-000000000000"),t.v4=s;var c=/^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$/;t.parse=a,t.generateUuid=o}),define("vs/languages/typescript/features/tokenization",["require","exports","vs/base/strings","vs/base/arrays","vs/base/collections","vs/editor/modes/modes","vs/editor/modes/supports","vs/languages/vsxml/vsxml","vs/editor/modes/stream","vs/languages/typescript/lib/typescriptServices","vs/editor/modes/modesExtensions"],function(e,t,r,n,s,a,o,i,l,c,u){function d(e,t){var r=c.createClassifier({log:function(){}}),n=t===h.TypeScript?b:w,s=t===h.TypeScript?y:_;return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new g(e,null,t,f.Unknown)},tokenize:function(e,t,a,o){return p(n,s,r,t,e,a,o)}}}function p(e,t,s,i,l,u){function d(e,t,r){(0===p.tokens.length||void 0!==r||n.tail(p.tokens).type!==t)&&p.tokens.push(new o.Token(e,t,r||a.Bracket.None))}void 0===u&&(u=0);var p={tokens:[],actualStopOffset:u+l.length,endState:new g(i.getMode(),i.getStateData(),i.language,f.Unknown),modeTransitions:[{startIndex:u,mode:i.getMode()}]};if(m(i,u,l,d))return p;var b=s.getClassificationsForLine(l,f.toEndOfLineState(i.errorState),!0),y=i.language===h.TypeScript,w=0;return p.endState.errorState=f.toErrorState(b.finalLexState,l,i.errorState),b.entries.forEach(function(n){var s,o=a.Bracket.None;if(n.classification===c.TokenClass.Punctuation){var p=l.charCodeAt(w);o=v[p]||a.Bracket.None,s=e[p]||t[n.classification],d(w+u,s,o)}else n.classification===c.TokenClass.Comment?i.errorState===f.InDocMultiLineCommentTrivia||l.match(/\/\*\*.*$/)&&!l.match(/^\s*\/\//)?d(w+u,y?"comment.doc.ts":"comment.doc.js",a.Bracket.None):i.errorState===f.InMultiLineCommentTrivia||l.match(/\/\*.*$/)&&!l.match(/^\s*\/\//)?d(w+u,y?"comment.block.ts":"comment.block.js",a.Bracket.None):d(w+u,y?"comment.line.ts":"comment.line.js",a.Bracket.None):d(w+u,t[n.classification]||r.empty,void 0);w+=n.length}),p}function m(e,t,r,n){if(!r.match(T))return!1;var s,o,c=new l.LineStream(r),u=new i.VSXMLExpression(e.getMode(),e);for(c.advanceIfRegExp(T).length>0&&n(t,"comment.vs",a.Bracket.None);!c.eos();){o=c.pos();do{if(s=u.tokenize(c),null===s||void 0===s||(void 0===s.type||null===s.type)&&(void 0===s.nextState||null===s.nextState))throw new Error("Tokenizer must return a valid state");if(s.nextState&&(s.nextState.setStateData(u.getStateData()),u=s.nextState),c.pos()<=o)throw new Error}while(!s.type&&""!==s.type);n(o+t,s.type,s.bracket)}return!0}!function(e){e[e.TypeScript=0]="TypeScript",e[e.EcmaScript5=1]="EcmaScript5"}(t.Language||(t.Language={}));var h=t.Language;t.createTokenizationSupport=d;var f;!function(e){e[e.Unknown=0]="Unknown",e[e.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",e[e.InDocMultiLineCommentTrivia=2]="InDocMultiLineCommentTrivia",e[e.InSingleQuoteStringLiteral=3]="InSingleQuoteStringLiteral",e[e.InDoubleQuoteStringLiteral=4]="InDoubleQuoteStringLiteral"}(f||(f={}));var f;!function(e){function t(t){switch(t){case e.InSingleQuoteStringLiteral:return c.EndOfLineState.InSingleQuoteStringLiteral;case e.InDoubleQuoteStringLiteral:return c.EndOfLineState.InDoubleQuoteStringLiteral;case e.InMultiLineCommentTrivia:case e.InDocMultiLineCommentTrivia:return c.EndOfLineState.InMultiLineCommentTrivia}return c.EndOfLineState.Start}function r(t,r,n){switch(t){case c.EndOfLineState.Start:return e.Unknown;case c.EndOfLineState.InSingleQuoteStringLiteral:return e.InSingleQuoteStringLiteral;case c.EndOfLineState.InDoubleQuoteStringLiteral:return e.InDoubleQuoteStringLiteral;case c.EndOfLineState.InMultiLineCommentTrivia:return n===e.InDocMultiLineCommentTrivia||r.match(/\/\*\*.*$/)?e.InDocMultiLineCommentTrivia:e.InMultiLineCommentTrivia}}e.toEndOfLineState=t,e.toErrorState=r}(f||(f={}));var g=function(){function e(e,t,r,n){this._mode=e,this._state=t,this.language=r,this.errorState=n}return e.prototype.clone=function(){return new e(this._mode,u.safeStateClone(this._state),this.language,this.errorState)},e.prototype.equals=function(t){return t===this?!0:t&&t instanceof e?this.errorState!==t.errorState?!1:u.safeStateEquals(this._state,t._state):!1},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(){throw new Error},e.prototype.getStateData=function(){return this._state},e.prototype.setStateData=function(e){this._state=e},e}(),v=s.createNumberDictionary();v["(".charCodeAt(0)]=a.Bracket.Open,v[")".charCodeAt(0)]=a.Bracket.Close,v["{".charCodeAt(0)]=a.Bracket.Open,v["}".charCodeAt(0)]=a.Bracket.Close,v["[".charCodeAt(0)]=a.Bracket.Open,v["]".charCodeAt(0)]=a.Bracket.Close;var b=s.createNumberDictionary();b["(".charCodeAt(0)]="delimiter.parenthesis.ts",b[")".charCodeAt(0)]="delimiter.parenthesis.ts",b["{".charCodeAt(0)]="delimiter.bracket.ts",b["}".charCodeAt(0)]="delimiter.bracket.ts",b["[".charCodeAt(0)]="delimiter.array.ts",b["]".charCodeAt(0)]="delimiter.array.ts";var y=s.createNumberDictionary();y[c.TokenClass.Identifier]="identifier.ts",y[c.TokenClass.Keyword]="keyword.ts",y[c.TokenClass.Operator]="delimiter.ts",y[c.TokenClass.Punctuation]="delimiter.ts",y[c.TokenClass.NumberLiteral]="number.ts",y[c.TokenClass.RegExpLiteral]="regexp.ts",y[c.TokenClass.StringLiteral]="string.ts";var w=s.createNumberDictionary();w["(".charCodeAt(0)]="delimiter.parenthesis.js",w[")".charCodeAt(0)]="delimiter.parenthesis.js",w["{".charCodeAt(0)]="delimiter.bracket.js",w["}".charCodeAt(0)]="delimiter.bracket.js",w["[".charCodeAt(0)]="delimiter.array.js",w["]".charCodeAt(0)]="delimiter.array.js";var _=s.createNumberDictionary();_[c.TokenClass.Identifier]="identifier.js",_[c.TokenClass.Keyword]="keyword.js",_[c.TokenClass.Operator]="delimiter.js",_[c.TokenClass.Punctuation]="delimiter.js",_[c.TokenClass.NumberLiteral]="number.js",_[c.TokenClass.RegExpLiteral]="regexp.js",_[c.TokenClass.StringLiteral]="string.js";var T=/^\s*\/\/\//}),define("vs/languages/typescript/features/quickFixMainActions",["require","exports","vs/base/strings","vs/base/errors","vs/base/lib/winjs.base","vs/base/paths"],function(e,t,r,n,s,a){var o=function(){function e(e){this._requestService=e.requestService,this._fileService=e.fileService,this._resourceService=e.resourceService}return e.prototype.evaluate=function(e,t,r){var n=JSON.parse(r);switch(n.type){case"addtripleslash":return this.evaluateTripleSlashQuickFix(n.name,e)}return s.Promise.as(null)},e.prototype.evaluateTripleSlashQuickFix=function(e,t){var s=this,o="/typings/"+e,i=r.rtrim(a.dirname(this._requestService.getPath("root",t)),"/"),l=a.relative(i,o),c=r.format('/// <reference path="{0}"/>\n',l),u={editOperations:[{range:{startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1},text:c}]};return this._fileService.resolveFileStat(o).then(function(){return u},function(){var t="https://raw.githubusercontent.com/borisyankov/DefinitelyTyped/master/"+e;return s._requestService.makeRequest({url:t,followRedirects:5}).then(function(e){return s._fileService.createFile(o,e.responseText).then(function(){return u},function(){return u})},function(e){return n.onUnexpectedError(r.format("Unable to fetch d.ts file at {0}: {1}",t,e.toString())),u})})},e}();t.QuickFixMainActions=o}),define("vs/languages/typescript/typescript",["require","exports","vs/platform/platform"],function(e,t,r){var n;!function(e){e.ResourceSetChanged="typescript.resourceSetChanged"}(n=t.Events||(t.Events={}));var s;!function(e){function t(e){s=e}function n(){return s}e.Identifier="typescript",r.Registry.add(e.Identifier,e);var s;e.setProjectResolver=t,e.getProjectResolver=n}(s=t.Extensions||(t.Extensions={}))});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/typescript/typescriptMode",["require","exports","vs/base/lib/winjs.base","vs/base/lifecycle","vs/base/errors","vs/editor/modes/modesExtensions","vs/editor/modes/supports","vs/base/uuid","vs/base/arrays","vs/platform/services","vs/languages/typescript/features/tokenization","vs/languages/typescript/features/quickFixMainActions","vs/platform/thread/attribute","vs/languages/typescript/typescript"],function(e,t,r,n,s,a,o,i,l,c,u,d,p,m){var h=function(e){function t(t,r){var n=this;e.call(this,t,r,c.AsyncDescriptor.create("vs/languages/typescript/typescriptWorker2","TypeScriptWorker2")),this._disposables=[],this._projectResolverPromise=null,this._projectPromise=null,this._pendingCallbacks=[],this._telemetryService=t.telemetryService,t.eventService&&this._disposables.push(t.eventService.addListener2(m.Events.ResourceSetChanged,function(){return n._joinProjectResolver()})),this.tokenizationSupport=u.createTokenizationSupport(this,u.Language.TypeScript),this.electricCharacterSupport=new o.BracketElectricCharacterSupport(this,{brackets:[{tokenType:"delimiter.bracket.ts",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.ts",open:"[",close:"]",isElectric:!0},{tokenType:"delimiter.parenthesis.ts",open:"(",close:")",isElectric:!0}],docComment:{scope:"comment.doc",open:"/**",lineStart:" * ",close:" */"}}),this.referenceSupport=new o.ReferenceSupport(this,{tokens:["identifier.ts"],findReferences:function(e,t,r){return n.findReferences(e,t,r)}}),this.navigateTypesSupport=this,this.extraInfoSupport=this,this.formattingSupport=this,this.declarationSupport=new o.DeclarationSupport(this,{tokens:["identifier.ts","string.ts","attribute.value.vs"],findDeclaration:function(e,t){return n.findDeclaration(e,t)}}),this.quickFixSupport=this,this.logicalSelectionSupport=this,this.parameterHintsSupport=new o.ParameterHintsSupport(this,{triggerCharacters:["(",","],excludeTokens:["string.ts"],getParameterHints:function(e,t){return n.getParameterHints(e,t)}}),this.outlineSupport=this,this.emitOutputSupport=this,this.codeLensSupport=this,this.renameSupport=this,this.characterPairSupport=new o.CharacterPairSupport(this,{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`"}]}),this.suggestSupport=new o.SuggestSupport(this,{triggerCharacters:["."],excludeTokens:["string","comment","number"],sortBy:[{type:"reference",partSeparator:"/"}],suggest:function(e,t){return n.suggest(e,t)},getSuggestionDetails:function(e,t,r){return n.getSuggestionDetails(e,t,r)}})}return __extends(t,e),t.prototype.dispose=function(){this._disposables=n.disposeAll(this._disposables)},t.prototype._releaseCallbacks=function(e,t){for(;this._pendingCallbacks.length>0;){var r=this._pendingCallbacks.shift();t?r.error(t):r.completion(e)}},t.prototype._joinProjectResolver=function(){var e=this;if(!this._threadService.isInMainThread)return null;var t,n;if(n=new r.TPromise(function(r,n){t={completion:r,error:n},e._pendingCallbacks.push(t)},function(){var r=e._pendingCallbacks.indexOf(t);r>=0&&(e._pendingCallbacks.splice(r,1),t.error(s.canceled()))}),!this._projectPromise){if(!this._projectResolverPromise){var a=this._getProjectResolverDescription();if(!a)return null;this._projectResolverPromise=this._instantiationService.createInstance(a)}this._projectPromise=this._projectResolverPromise.then(function(e){var t=e.resolve();return r.Promise.is(t)?t:r.TPromise.as({})}).then(function(t){return t?t.hasChanges!==!0&&l.isFalsyOrEmpty(t.added)&&l.isFalsyOrEmpty(t.removed)?null:e._acceptProjectDelta(t):null});var o,c=Date.now(),u=i.v4().asHex();o=setInterval(function(){e._telemetryService.log("typescript.projectResolver.slow",{module:e._getProjectResolverDescription().moduleName,ctor:e._getProjectResolverDescription().ctorName,resolveCallUuid:u,totalWaitTime:Date.now()-c})},2e4),this._projectPromise.done(function(t){clearTimeout(o),e._projectPromise=null,e._releaseCallbacks(t,null)},function(t){clearTimeout(o),e._projectPromise=null,e._releaseCallbacks(null,t)})}return n},t.prototype._getProjectResolverDescription=function(){return m.Extensions.getProjectResolver()},t.prototype._acceptProjectDelta=function(e){return this._worker(function(t){return t.acceptProjectDelta(e)})},t.prototype.getNonWordTokenTypes=function(){return["delimiter.ts","delimiter.parenthesis.ts","delimiter.bracket.ts","delimiter.array.ts"]},t.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},t.prototype._pickAWorkerToValidate=function(){return this._worker(function(e){return e.enableValidator()})},t.prototype.getOutline=function(e){return this._worker(function(t){return t.getOutline(e)})},t.prototype.findOccurrences=function(e,t,r){return void 0===r&&(r=!1),this._worker(function(n){return n.findOccurrences(e,t,r)})},t.prototype.suggest=function(e,t){return this._worker(function(r){return r.suggest(e,t)})},t.prototype.getSuggestionDetails=function(e,t,r){return this._worker(function(n){return n.getSuggestionDetails(e,t,r)})},t.prototype.getParameterHints=function(e,t){return this._worker(function(r){return r.getParameterHints(e,t)})},t.prototype.getEmitOutput=function(e,t){return void 0===t&&(t=void 0),this._worker(function(r){return r.getEmitOutput(e,t)})},t.prototype.getWordDefinition=function(){return t.WORD_DEFINITION},t.prototype._worker=function(t){return e.prototype._worker.call(this,t)},t.prototype.findReferences=function(e,t,r){return this._worker(function(n){return n.findReferences(e,t,r)})},Object.defineProperty(t.prototype,"filter",{get:function(){return["identifier.ts","string.ts"]},enumerable:!0,configurable:!0}),t.prototype.rename=function(e,t,r){return this._worker(function(n){return n.rename(e,t,r)})},t.prototype.getNavigateToItems=function(e){return this._worker(function(t){return t.getNavigateToItems(e)})},t.prototype.runQuickFixAction=function(e,t,r){var n=this,s=this._instantiationService.createInstance(d.QuickFixMainActions);return s.evaluate(e,t,r).then(function(s){return s?s:n.runQuickFixActionInWorker(e,t,r)})},t.prototype.runQuickFixActionInWorker=function(e,t,r){return this._worker(function(n){return n.runQuickFixAction(e,t,r)})},t.prototype.getQuickFixes=function(e,t){return this._worker(function(r){return r.getQuickFixes(e,t)})},t.prototype.getRangesToPosition=function(e,t){return this._worker(function(r){return r.getRangesToPosition(e,t)})},t.prototype.findDeclaration=function(e,t){return this._worker(function(r){return r.findDeclaration(e,t)})},t.prototype.findTypeDeclaration=function(e,t){return this._worker(function(r){return r.findTypeDeclaration(e,t)})},t.prototype.computeInfo=function(e,t){return this._worker(function(r){return r.computeInfo(e,t)})},t.prototype.getAutoFormatTriggerCharacters=function(){return[";","}","\n"]},t.prototype.formatDocument=function(e,t){return this._worker(function(r){return r.formatDocument(e,t)})},t.prototype.formatRange=function(e,t,r){return this._worker(function(n){return n.formatRange(e,t,r)})},t.prototype.formatAfterKeystroke=function(e,t,r,n){return this._worker(function(s){return s.formatAfterKeystroke(e,t,r,n)})},t.prototype.enableCodeLens=function(){return this._options&&this._options.referenceInfos===!0},t.prototype.findCodeLensSymbols=function(e){return this._worker(function(t){return t.findCodeLensSymbols(e)})},t.prototype.findCodeLensReferences=function(e,t){return this._worker(function(r){return r.findCodeLensReferences(e,t)})},t.$_acceptProjectDelta=p.AllWorkers(t,t.prototype._acceptProjectDelta),t.$_pickAWorkerToValidate=p.OneWorker(t,t.prototype._pickAWorkerToValidate,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.$getOutline=p.OneWorker(t,t.prototype.getOutline,c.ThreadAffinity.Group1),t.$findOccurrences=p.OneWorker(t,t.prototype.findOccurrences,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$suggest=p.OneWorker(t,t.prototype.suggest,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getSuggestionDetails=p.OneWorker(t,t.prototype.getSuggestionDetails,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getParameterHints=p.OneWorker(t,t.prototype.getParameterHints,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getEmitOutput=p.OneWorker(t,t.prototype.getEmitOutput,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.WORD_DEFINITION=a.createWordRegExp("$"),t.$findReferences=p.OneWorker(t,t.prototype.findReferences,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.$rename=p.OneWorker(t,t.prototype.rename,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getNavigateToItems=p.OneWorker(t,t.prototype.getNavigateToItems,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t.$runQuickFixActionInWorker=p.OneWorker(t,t.prototype.runQuickFixActionInWorker,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getQuickFixes=p.OneWorker(t,t.prototype.getQuickFixes,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$getRangesToPosition=p.OneWorker(t,t.prototype.getRangesToPosition,c.ThreadAffinity.Group1),t.$findDeclaration=p.OneWorker(t,t.prototype.findDeclaration,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$findTypeDeclaration=p.OneWorker(t,t.prototype.findTypeDeclaration,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$computeInfo=p.OneWorker(t,t.prototype.computeInfo,t.prototype._joinProjectResolver,c.ThreadAffinity.Group2),t.$formatDocument=p.OneWorker(t,t.prototype.formatDocument,c.ThreadAffinity.Group1),t.$formatRange=p.OneWorker(t,t.prototype.formatRange,c.ThreadAffinity.Group1),t.$formatAfterKeystroke=p.OneWorker(t,t.prototype.formatAfterKeystroke,c.ThreadAffinity.Group1),t.findCodeLensSymbols=p.OneWorker(t,t.prototype.findCodeLensSymbols,c.ThreadAffinity.Group1),t.findCodeLensReferences=p.OneWorker(t,t.prototype.findCodeLensReferences,t.prototype._joinProjectResolver,c.ThreadAffinity.Group3),t}(a.AbstractMode);t.TypeScriptMode=h});