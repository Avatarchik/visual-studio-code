/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/workbench/ui/parts/editor/textEditorWorker",["require","exports","vs/editor/worker/modesWorker","vs/base/strings","vs/base/arrays","vs/base/paths","vs/editor/core/range"],function(e,t,n,r,i,o,s){var a=function(e){function t(n,r,i){e.call(this,n,r,i),this._contextService=n.contextService,this._requestService=n.requestService;var o=this._contextService.getWorkspace();this.patterns=o?t.createPatterns(o):[]}return __extends(t,e),Object.defineProperty(t.prototype,"contextService",{get:function(){return this._contextService},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestService",{get:function(){return this._requestService},enumerable:!0,configurable:!0}),t.prototype.computeLinks=function(n){var r=this;return e.prototype.computeLinks.call(this,n).then(function(e){if(!r.patterns.length)return e;for(var i=r.resourceService.get(n),o=1,s=i.getLineCount();s>=o;o++)e=e.concat(t.detectLinks(i.getLineContent(o),o,r.patterns,r.requestService));return e})},t.createPatterns=function(e){var t=[],n=i.distinct([o.normalize(e.resource.path,!0),o.normalize(e.resource.path,!1)]);return n.forEach(function(e){t.push(new RegExp(r.escapeRegExpCharacters(e)+"(\\S*) on line ((\\d+)(, column (\\d+))?)","gi")),t.push(new RegExp(r.escapeRegExpCharacters(e)+"(\\S*):line ((\\d+)(, column (\\d+))?)","gi")),t.push(new RegExp(r.escapeRegExpCharacters(e)+"([^\\s\\(\\)]*)(\\s?\\((\\d+)(,(\\d+))?)\\)","gi")),t.push(new RegExp(r.escapeRegExpCharacters(e)+"([^:\\s\\(\\)<>'\"\\[\\]]*)(:(\\d+))?(:(\\d+))?","gi"))}),t},t.detectLinks=function(e,t,n,i){var o=[];return n.forEach(function(n){n.lastIndex=0;for(var a,l=0;null!==(a=n.exec(e));){var c=r.replaceAll(r.rtrim(a[1],"."),"\\","/"),u=i.getRequestUrl("root",c,!0);if(a[3]){var d=a[3];if(a[5]){var p=a[5];u=r.format("{0}#{1},{2}",u,d,p)}else u=r.format("{0}#{1}",u,d)}var h=r.rtrim(a[0],"."),m=e.indexOf(h,l);l+=m+h.length;var f={startColumn:m+1,startLineNumber:t,endColumn:m+1+h.length,endLineNumber:t};if(o.some(function(e){return s.areIntersectingOrTouching(e.range,f)}))return;o.push({range:f,url:u})}}),o},t}(n.AbstractWorkerMode);t.TextEditorWorker=a});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/workbench/contrib/build/buildLogWorker",["require","exports","vs/workbench/ui/parts/editor/textEditorWorker"],function(e,t,n){var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n.TextEditorWorker);t.BuildLogWorker=r});