/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};define("vs/workbench/contrib/git/gitEditorModes",["require","exports","vs/editor/modes/supports","vs/editor/modes/modesExtensions","vs/platform/services"],function(e,t,n,r,i){var o=function(e){function t(t,r){var o=this;e.call(this,t,r,i.AsyncDescriptor.create("vs/workbench/contrib/git/gitEditorModeWorker","GitInPlaceTerminalEditorWorker")),this.tokenizationSupport=new n.TokenizationSupport(this,{getInitialState:function(){return new s(o)}},!1)}return __extends(t,e),t.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["#"],blockCommentStartToken:"#",blockCommentEndToken:" "}},t}(r.AbstractMode);t.GitCommitMode=o;var s=function(){function e(e){this.mode=e}return e.prototype.clone=function(){return new e(this.getMode())},e.prototype.tokenize=function(e){return e.skipWhitespace()?{type:""}:e.advanceIfString("#")||e.advanceIfString(";")?(e.advanceToEOS(),{type:"comment.git"}):(e.advanceToEOS(),{type:""})},e.prototype.getMode=function(){return this.mode},e.prototype.getStateData=function(){return this.stateData},e.prototype.setStateData=function(e){this.stateData=e},e.prototype.equals=function(t){return t instanceof e},e}(),a=function(e){function t(t,r){var o=this;e.call(this,t,r,i.AsyncDescriptor.create("vs/workbench/contrib/git/gitEditorModeWorker","GitInPlaceTerminalEditorWorker")),this.tokenizationSupport=new n.TokenizationSupport(this,{getInitialState:function(){return new c(o)}},!1)}return __extends(t,e),t.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["#"],blockCommentStartToken:"#",blockCommentEndToken:" "}},t}(r.AbstractMode);t.GitRebaseMode=a;var l;!function(e){e[e.ACTION=0]="ACTION",e[e.HASH=1]="HASH",e[e.MESSAGE=2]="MESSAGE"}(l||(l={}));var c=function(){function e(e){this.mode=e,this.gitRebaseState=l.ACTION}return e.prototype.clone=function(){var t=new e(this.getMode());return t.gitRebaseState=this.gitRebaseState,t},e.prototype.tokenize=function(e){if(e.skipWhitespace())return{type:""};if(e.advanceIfString("#")||e.advanceIfString(";"))return e.advanceToEOS(),this.gitRebaseState=l.ACTION,{type:"comment.git"};if(this.gitRebaseState===l.ACTION)return e.advanceIfRegExp(/^(pick|reword|edit|squash|fixup|exec)/)&&(e.eos()||e.peek().match(/\s+/))?(this.gitRebaseState=l.HASH,{type:"key.git"}):e.advanceIfRegExp(/^(p|r|e|s|f|x)/)&&(e.eos()||e.peek().match(/\s+/))?(this.gitRebaseState=l.HASH,{type:"key.git"}):(e.advanceToEOS(),{type:"error-token.git"});if(this.gitRebaseState===l.HASH){if(e.advanceIfRegExp(/^[a-z0-9]{7,}\s+/))return this.gitRebaseState=l.MESSAGE,{type:"variable.git"}}else this.gitRebaseState===l.MESSAGE;return e.advanceToEOS(),this.gitRebaseState=l.ACTION,{type:""}},e.prototype.getMode=function(){return this.mode},e.prototype.getStateData=function(){return this.stateData},e.prototype.setStateData=function(e){this.stateData=e},e.prototype.equals=function(e){return e.gitRebaseState===this.gitRebaseState},e}()});